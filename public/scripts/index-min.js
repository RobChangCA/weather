"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).TeleportAutocomplete=e()}}(function(){return function e(t,i,n){function r(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return r(i||e)},c,c.exports,e,t,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function r(e){return e&&e.__esModule?e:{default:e}}e("classlist-polyfill"),e("element-closest");var s=r(e("halfred")),o=r(e("minivents")),a=r(e("core-js/library/fn/object/assign")),l=r(e("core-js/library/fn/array/find")),u=r(e("core-js/library/fn/regexp/escape")),c=r(e("debounce")),d={BACK:8,TAB:9,ENTER:13,UP:38,DOWN:40},f=function(e){return this.wrapMatches(e.title)};HTMLElement.prototype.on=HTMLElement.prototype.addEventListener,HTMLElement.prototype.off=HTMLElement.prototype.removeEventListener;var p=function(){function e(){var t=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=i.el,r=void 0===n?null:n,s=i.value,l=i.maxItems,u=void 0===l?10:l,d=i.itemTemplate,p=void 0===d?f:d,h=i.geoLocate,y=void 0===h||h,m=i.apiRoot,_=void 0===m?"https://api.teleport.org/api":m,v=i.apiVersion,g=void 0===v?1:v,b=i.embeds,$=void 0===b?"city:country,city:admin1_division,city:timezone/tz:offsets-now,city:urban_area":b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,o.default)(this);var w="string"==typeof r?document.querySelector(r):r;return this.setupInput(w),(0,a.default)(this,{maxItems:u,geoLocate:y,apiRoot:_,apiVersion:g,itemTemplate:p,embeds:$,results:[],_activeIndex:0,_cache:{},_query:this.el.value,value:s}),this.value&&this.value.title?this.query=this.value.title:this.query&&this.fetchResults(function(){t.value=t.getResultByTitle(t.query),t.emit("change",t.value)}),this.getCities=(0,c.default)(this.getCities,200),this}return n(e,[{key:"query",get:function(){return this._query},set:function(e){if(e===this._query)return e;this._query=e,this.el.value=e,this.emit("querychange",e)}},{key:"activeIndex",get:function(){return this._activeIndex},set:function(e){var t=this.list.childNodes[this._activeIndex];t&&t.classList.remove("is-active"),this._activeIndex=e;var i=this.list.childNodes[e];i&&i.classList.add("is-active")}},{key:"loading",set:function(e){this.container.classList.toggle("spinner",e)}}]),n(e,[{key:"destroy",value:function(){this.el.off("input",this.oninput),this.el.off("keydown",this.onkeydown),this.el.off("focus",this.onfocus),this.el.off("blur",this.onblur),this.el.off("click",this.onclick),this.el.classList.remove("tp-ac__input"),this.container.parentNode.replaceChild(this.el.parentNode.removeChild(this.el),this.container)}},{key:"clear",value:function(){this.results=[],this.selectByIndex(0)}},{key:"setupInput",value:function(e){if(!(e&&e instanceof HTMLInputElement))throw new Error("Invalid element given");e.insertAdjacentHTML("beforebegin",'<div class="tp-autocomplete"><ul class="tp-ac__list"></ul></div>'),Object.defineProperty(this,"container",{value:e.previousSibling}),Object.defineProperty(this,"list",{value:this.container.firstChild});var t=this.container.insertBefore(e.parentNode.removeChild(e),this.list);t.classList.add("tp-ac__input"),Object.defineProperty(this,"el",{enumerable:!0,value:t}),this.el.on("input",this.oninput.bind(this)),this.el.on("keydown",this.onkeydown.bind(this)),this.el.on("focus",this.onfocus.bind(this)),this.el.on("blur",this.onblur.bind(this)),this.el.on("click",this.onclick.bind(this)),this.list.on("mousedown",this.onlistclick.bind(this))}},{key:"onlistclick",value:function(e){var t=[].indexOf.call(this.list.children,e.target.closest(".tp-ac__item"));this.selectByIndex(t)}},{key:"onclick",value:function(){this.el.select()}},{key:"onfocus",value:function(){this.renderList()}},{key:"onblur",value:function(){this.list.innerHTML=""}},{key:"oninput",value:function(){var e=this;this._query=this.el.value,this.fetchResults(function(){return e.renderList()})}},{key:"onkeydown",value:function(e){var t=e.keyCode;switch(-1!==[d.UP,d.DOWN].indexOf(t)&&e.preventDefault(),t){case d.BACK:(this.value||1===this.query.length)&&this.clear();break;case d.ENTER:!this.value&&this.query&&e.preventDefault(),this.selectByIndex(this.activeIndex);break;case d.TAB:this.value||this.selectByIndex(this.activeIndex);break;case d.UP:this.activeIndex=Math.max(0,this.activeIndex-1);break;case d.DOWN:this.activeIndex=Math.min(this.results.length-1,this.activeIndex+1)}}},{key:"selectByIndex",value:function(e){this.activeIndex=e;var t=this.value;this.value=this.results[e]||null;var i=this.list.firstChild&&this.list.firstChild.classList.contains("geolocate");i&&this.currentLocation(),t===this.value||i||this.emit("change",this.value),this.list.innerHTML="",this.query=this.value?this.value.title:""}},{key:"wrapMatches",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return this.query.split(/[\,\s]+/).filter(function(e){return!!e}).forEach(function(t){var i=new RegExp((0,u.default)(t)+"(?![^<]*>|[^<>]*</)","gi");e=e.replace(i,"<span>$&</span>")}),e}},{key:"renderList",value:function(){var e=this,t=(arguments.length<=0||void 0===arguments[0]?{}:arguments[0]).geoLocate,i=void 0===t?this.geoLocate:t,n=this.results.map(function(t){return'<li class="tp-ac__item">'+e.itemTemplate(t)+"</li>"}).slice(0,this.maxItems).join("");n||""===this.query||this.value||(n='<li class="tp-ac__item no-results">No matches</li>'),""===this.query&&i&&(n='<li class="tp-ac__item geolocate">Detect my current location</li>'),this.list.innerHTML=n,this.activeIndex=0}},{key:"getResultByTitle",value:function(e){return this.results&&e?(0,l.default)(this.results,function(t){return-1!==t.title.indexOf(e)}):null}},{key:"fetchResults",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];this.req&&this.req.abort();var i=this._cache[this.query];if(i)return this.results=i,t();this.req=this.getCities(function(i){e.results=e._cache[e.query]=i,t(),e.loading=!1}),this.loading=!0}},{key:"currentLocation",value:function(){var e=this,t=new XMLHttpRequest,i="location:nearest-cities/location:nearest-city/"+(this.embeds?"{"+this.embeds+"}":"");this.loading=!0,this.oldPlaceholder=this.el.placeholder,this.el.placeholder="Detecting location...",navigator.geolocation.getCurrentPosition(function(n){var r=n.coords;t.open("GET",e.apiRoot+"/locations/"+r.latitude+","+r.longitude+"/?embed="+i),t.setRequestHeader("Accept","application/vnd.teleport.v"+e.apiVersion+"+json"),t.addEventListener("load",function(){return e.parseLocation(JSON.parse(t.response))}),t.send()},function(t){var i=t.message;e.loading=!1,e.el.placeholder=i,setTimeout(function(){return e.el.placeholder=e.oldPlaceholder},3e3)},{timeout:5e3})}},{key:"parseLocation",value:function(e){var t=s.default.parse(e).embeddedArray("location:nearest-cities")[0];t&&(this.results=[this.parseCity(t)],"nopick"===this.geoLocate?(this.el.focus(),this.renderList({geoLocate:!1})):this.selectByIndex(0)),this.loading=!1,this.el.placeholder=this.oldPlaceholder}},{key:"getCities",value:function(e){var t=this;if(!this.query)return e([]);var i="city:search-results/city:item/"+(this.embeds?"{"+this.embeds+"}":""),n=new XMLHttpRequest,r=encodeURIComponent(this.query);return n.open("GET",this.apiRoot+"/cities/?search="+r+"&embed="+i+"&limit="+this.maxItems),n.setRequestHeader("Accept","application/vnd.teleport.v"+this.apiVersion+"+json"),n.addEventListener("load",function(){var i=s.default.parse(JSON.parse(n.response)).embeddedArray("city:search-results").map(function(e){return t.parseCity(e)});e(i)}),n.send(),n}},{key:"parseCity",value:function(e){var t=e.embedded("location:nearest-city")||e.embedded("city:item");t.country=t.embedded("city:country"),t.admin1_division=t.embedded("city:admin1_division"),t.timezone=t.embedded("city:timezone"),t.urban_area=t.embedded("city:urban_area");var i=t.full_name,n=t.name,r=t.geoname_id,s=t.population,o=t.location.latlon,l=o.latitude,u=o.longitude,c=e.matching_full_name,d={title:void 0===c?i:c,name:n,geonameId:r,latitude:l,longitude:u,population:s};if(t.country&&(0,a.default)(d,{country:t.country.name}),t.admin1_division){var f=t.admin1_division,p=f.name,h=f.geonames_admin1_code;(0,a.default)(d,{admin1Division:p,admin1DivisionCode:h})}if(t.timezone){var y=t.timezone.embedded("tz:offsets-now");(0,a.default)(d,{tzOffsetMinutes:y.total_offset_min})}if(t.urban_area){var m=t.urban_area,_=m.slug,v=m.name,g=m.ua_id,b=m.teleport_city_url;(0,a.default)(d,{uaName:v,uaId:g,uaCityUrl:b,uaSlug:_})}return d}}],[{key:"init",value:function(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new e("string"==typeof t||t instanceof HTMLInputElement?(0,a.default)(i,{el:t}):t)}}]),e}();i.default=p,t.exports=i.default},{"classlist-polyfill":2,"core-js/library/fn/array/find":3,"core-js/library/fn/object/assign":4,"core-js/library/fn/regexp/escape":5,debounce:33,"element-closest":34,halfred:35,minivents:39}],2:[function(e,t,i){"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var i,n=arguments.length;for(i=0;i<n;i++)e=arguments[i],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:i.call(this,e)}}e=null}():function(e){if("Element"in e){var t=e.Element.prototype,i=Object,n=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array.prototype.indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},o=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(e,t)},a=function(e){for(var t=n.call(e.getAttribute("class")||""),i=t?t.split(/\s+/):[],r=0,s=i.length;r<s;r++)this.push(i[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=a.prototype=[],u=function(){return new a(this)};if(s.prototype=Error.prototype,l.item=function(e){return this[e]||null},l.contains=function(e){return-1!==o(this,e+="")},l.add=function(){var e,t=arguments,i=0,n=t.length,r=!1;do{e=t[i]+"",-1===o(this,e)&&(this.push(e),r=!0)}while(++i<n);r&&this._updateClassName()},l.remove=function(){var e,t,i=arguments,n=0,r=i.length,s=!1;do{for(e=i[n]+"",t=o(this,e);-1!==t;)this.splice(t,1),s=!0,t=o(this,e)}while(++n<r);s&&this._updateClassName()},l.toggle=function(e,t){e+="";var i=this.contains(e),n=i?!0!==t&&"remove":!1!==t&&"add";return n&&this[n](e),!0===t||!1===t?t:!i},l.toString=function(){return this.join(" ")},i.defineProperty){var c={get:u,enumerable:!0,configurable:!0};try{i.defineProperty(t,"classList",c)}catch(e){-2146823252===e.number&&(c.enumerable=!1,i.defineProperty(t,"classList",c))}}else i.prototype.__defineGetter__&&t.__defineGetter__("classList",u)}}(window.self))},{}],3:[function(e,t,i){e("../../modules/es6.array.find"),t.exports=e("../../modules/$.core").Array.find},{"../../modules/$.core":11,"../../modules/es6.array.find":29}],4:[function(e,t,i){e("../../modules/es6.object.assign"),t.exports=e("../../modules/$.core").Object.assign},{"../../modules/$.core":11,"../../modules/es6.object.assign":30}],5:[function(e,t,i){e("../../modules/es7.regexp.escape"),t.exports=e("../../modules/$.core").RegExp.escape},{"../../modules/$.core":11,"../../modules/es7.regexp.escape":31}],6:[function(e,t,i){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],7:[function(e,t,i){t.exports=function(){}},{}],8:[function(e,t,i){var n=e("./$.ctx"),r=e("./$.iobject"),s=e("./$.to-object"),o=e("./$.to-length"),a=e("./$.array-species-create");t.exports=function(e){var t=1==e,i=2==e,l=3==e,u=4==e,c=6==e,d=5==e||c;return function(f,p,h){for(var y,m,_=s(f),v=r(_),g=n(p,h,3),b=o(v.length),$=0,w=t?a(f,b):i?a(f,0):void 0;b>$;$++)if((d||$ in v)&&(m=g(y=v[$],$,_),e))if(t)w[$]=m;else if(m)switch(e){case 3:return!0;case 5:return y;case 6:return $;case 2:w.push(y)}else if(u)return!1;return c?-1:l||u?u:w}}},{"./$.array-species-create":9,"./$.ctx":12,"./$.iobject":17,"./$.to-length":25,"./$.to-object":26}],9:[function(e,t,i){var n=e("./$.is-object"),r=e("./$.is-array"),s=e("./$.wks")("species");t.exports=function(e,t){var i;return r(e)&&("function"!=typeof(i=e.constructor)||i!==Array&&!r(i.prototype)||(i=void 0),n(i)&&null===(i=i[s])&&(i=void 0)),new(void 0===i?Array:i)(t)}},{"./$.is-array":18,"./$.is-object":19,"./$.wks":28}],10:[function(e,t,i){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],11:[function(e,t,i){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},{}],12:[function(e,t,i){var n=e("./$.a-function");t.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":6}],13:[function(e,t,i){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],14:[function(e,t,i){var n=e("./$.global"),r=e("./$.core"),s=e("./$.ctx"),o=function e(t,i,o){var a,l,u,c=t&e.F,d=t&e.G,f=t&e.S,p=t&e.P,h=t&e.B,y=t&e.W,m=d?r:r[i]||(r[i]={}),_=d?n:f?n[i]:(n[i]||{}).prototype;for(a in d&&(o=i),o)(l=!c&&_&&a in _)&&a in m||(u=l?_[a]:o[a],m[a]=d&&"function"!=typeof _[a]?o[a]:h&&l?s(u,n):y&&_[a]==u?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t.prototype=e.prototype,t}(u):p&&"function"==typeof u?s(Function.call,u):u,p&&((m.prototype||(m.prototype={}))[a]=u))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,t.exports=o},{"./$.core":11,"./$.ctx":12,"./$.global":16}],15:[function(e,t,i){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],16:[function(e,t,i){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],17:[function(e,t,i){var n=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./$.cof":10}],18:[function(e,t,i){var n=e("./$.cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./$.cof":10}],19:[function(e,t,i){t.exports=function(e){return"object"===_typeof(e)?null!==e:"function"==typeof e}},{}],20:[function(e,t,i){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},{}],21:[function(e,t,i){var n=e("./$"),r=e("./$.to-object"),s=e("./$.iobject");t.exports=e("./$.fails")(function(){var e=Object.assign,t={},i={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(e){i[e]=e}),7!=e({},t)[n]||Object.keys(e({},i)).join("")!=r})?function(e,t){for(var i=r(e),o=arguments,a=o.length,l=1,u=n.getKeys,c=n.getSymbols,d=n.isEnum;a>l;)for(var f,p=s(o[l++]),h=c?u(p).concat(c(p)):u(p),y=h.length,m=0;y>m;)d.call(p,f=h[m++])&&(i[f]=p[f]);return i}:Object.assign},{"./$":20,"./$.fails":15,"./$.iobject":17,"./$.to-object":26}],22:[function(e,t,i){t.exports=function(e,t){var i=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,i)}}},{}],23:[function(e,t,i){var n=e("./$.global"),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(e){return r[e]||(r[e]={})}},{"./$.global":16}],24:[function(e,t,i){var n=Math.ceil,r=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},{}],25:[function(e,t,i){var n=e("./$.to-integer"),r=Math.min;t.exports=function(e){return e>0?r(n(e),9007199254740991):0}},{"./$.to-integer":24}],26:[function(e,t,i){var n=e("./$.defined");t.exports=function(e){return Object(n(e))}},{"./$.defined":13}],27:[function(e,t,i){var n=0,r=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},{}],28:[function(e,t,i){var n=e("./$.shared")("wks"),r=e("./$.uid"),s=e("./$.global").Symbol;t.exports=function(e){return n[e]||(n[e]=s&&s[e]||(s||r)("Symbol."+e))}},{"./$.global":16,"./$.shared":23,"./$.uid":27}],29:[function(e,t,i){var n=e("./$.export"),r=e("./$.array-methods")(5),s=!0;"find"in[]&&Array(1).find(function(){s=!1}),n(n.P+n.F*s,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./$.add-to-unscopables")("find")},{"./$.add-to-unscopables":7,"./$.array-methods":8,"./$.export":14}],30:[function(e,t,i){var n=e("./$.export");n(n.S+n.F,"Object",{assign:e("./$.object-assign")})},{"./$.export":14,"./$.object-assign":21}],31:[function(e,t,i){var n=e("./$.export"),r=e("./$.replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return r(e)}})},{"./$.export":14,"./$.replacer":22}],32:[function(e,t,i){t.exports=Date.now||function(){return(new Date).getTime()}},{}],33:[function(e,t,i){var n=e("date-now");t.exports=function(e,t,i){var r,s,o,a,l;function u(){var c=n()-a;c<t&&c>0?r=setTimeout(u,t-c):(r=null,i||(l=e.apply(o,s),r||(o=s=null)))}return null==t&&(t=100),function(){o=this,s=arguments,a=n();var c=i&&!r;return r||(r=setTimeout(u,t)),c&&(l=e.apply(o,s),o=s=null),l}}},{"date-now":32}],34:[function(e,t,i){var n;(n=Element.prototype).matches=n.matches||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector,n.closest=n.closest||function(e){for(var t=this;t&&!t.matches(e);)t=t.parentElement;return t}},{}],35:[function(e,t,i){var n=e("./lib/parser"),r=e("./lib/resource"),s=!1;t.exports={parse:function(e){return(new n).parse(e,s)},enableValidation:function(e){s=null==e||e},disableValidation:function(){s=!1},Resource:r}},{"./lib/parser":37,"./lib/resource":38}],36:[function(e,t,i){function n(){arguments.length>=1?this._array=arguments[0]:this._array=[]}n.prototype.array=function(){return this._array},n.prototype.isEmpty=function(e){return 0===this._array.length},n.prototype.push=function(e){var t=this._array.slice(0);return t.push(e),new n(t)},n.prototype.pop=function(){return new n(this._array.slice(0,this._array.length-1))},n.prototype.peek=function(){if(this.isEmpty())throw new Error("can't peek on empty stack");return this._array[this._array.length-1]},t.exports=n},{}],37:[function(e,t,i){var n=e("./resource"),r=e("./immutable_stack"),s={href:{required:!0,defaultValue:null},templated:{required:!1,defaultValue:!1},type:{required:!1,defaultValue:null},deprecation:{required:!1,defaultValue:null},name:{required:!1,defaultValue:null},profile:{required:!1,defaultValue:null},title:{required:!1,defaultValue:null},hreflang:{required:!1,defaultValue:null}};function o(){}function a(e,t,i){if(null==e)return e;var r,s=function(e,t,i){null!=(e=l(e,u,t,i))&&null!=e.self||d("Resource does not have a self link",t,i);return e}(e._links,t,i.push("_links")),o=(r=s)?r.curies:[],f=function(e,t,i){var n=l(e,c,t,i);if(null==n)return n;return Object.keys(n).forEach(function(e){n[e]=n[e].map(function(n){var r=a(n,null!=t?[]:null,i.push(e));return r._original=n,r})}),n}(e._embedded,t,i.push("_embedded")),p=new n(s,o,f,t);return function(e,t){Object.keys(e).forEach(function(i){"_links"!==i&&"_embedded"!==i&&(t[i]=e[i])})}(e,p),p._original=e,p}function l(e,t,i,n){if(null==e)return e;var r={};return Object.keys(e).forEach(function(s){r[s]=function(e,t,i,n,r){return s=t,"[object Array]"===Object.prototype.toString.call(s)?t.map(function(t){return i(e,t,n,r)}):[i(e,t,n,r)];var s}(s,e[s],t,i,n)}),r}function u(e,t,i,n){if("object"!==_typeof(t))throw new Error("Link object is not an actual object: "+t+" ["+_typeof(t)+"]");var r,o=function(e){var t={};return Object.keys(e).forEach(function(i){t[i]=e[i]}),t}(t);return Object.keys(s).forEach(function(t){null==o[t]&&(s[t].required&&d("Link misses required property "+t+".",i,n.push(e)),null!=s[t].defaultValue&&(o[t]=s[t].defaultValue))}),o.deprecation&&(r="Warning: Link "+f(n.push(e))+" is deprecated, see "+o.deprecation,"undefined"!=typeof console&&"function"==typeof console.log&&console.log(r)),!0!==o.templated&&!1!==o.templated&&(o.templated=!1),i?(o.href&&o.href.indexOf("{")>=0&&!o.templated&&d('Link seems to be an URI template but its "templated" property is not set to true.',i,n.push(e)),o):o}function c(e,t){return t}function d(e,t,i){t&&t.push({path:f(i),message:e})}function f(e){for(var t="$.",i=0;i<e.array().length;i++)t+=e.array()[i]+".";return t=t.substring(0,t.length-1)}o.prototype.parse=function(e,t){return a(e,t?[]:null,new r)},t.exports=o},{"./immutable_stack":36,"./resource":38}],38:[function(e,t,i){function n(e,t,i,n){this._links=e||{},this._initCuries(t),this._embedded=i||{},this._validation=n||[]}function r(e,t){return null!=e?e[t]:null}function s(e,t,i){i=i||0;var n=r(e,t);return null!=n&&n.length>=1?n[i]:null}n.prototype._initCuries=function(e){if(this._curiesMap={},e){this._curies=e;for(var t=0;t<this._curies.length;t++){var i=this._curies[t];this._curiesMap[i.name]=i}}else this._curies=[];this._preResolveCuries()},n.prototype._preResolveCuries=function(){this._resolvedCuriesMap={};for(var e=0;e<this._curies.length;e++){var t=this._curies[e];if(t.name)for(var i in this._links)"curies"!==i&&this._preResolveCurie(t,i)}},n.prototype._preResolveCurie=function(e,t){this._links[t];var i=t.split(/:(.+)/),n=i[0];if(e.name===n)if(e.templated&&i.length>=1){var r=e.href.replace(/(.*){(.*)}(.*)/,"$1"+i[1]+"$3");this._resolvedCuriesMap[r]=t}else this._resolvedCuriesMap[e.href]=t},n.prototype.allLinkArrays=function(){return this._links},n.prototype.linkArray=function(e){return r(this._links,e)},n.prototype.link=function(e,t){return s(this._links,e,t)},n.prototype.hasCuries=function(e){return this._curies.length>0},n.prototype.curieArray=function(e){return this._curies},n.prototype.curie=function(e){return this._curiesMap[e]},n.prototype.reverseResolveCurie=function(e){return this._resolvedCuriesMap[e]},n.prototype.allEmbeddedResourceArrays=function(){return this._embedded},n.prototype.embeddedResourceArray=function(e){return r(this._embedded,e)},n.prototype.embeddedResource=function(e,t){return s(this._embedded,e,t)},n.prototype.original=function(){return this._original},n.prototype.validationIssues=function(){return this._validation},n.prototype.allLinks=n.prototype.allLinkArrays,n.prototype.allEmbeddedArrays=n.prototype.allEmbeddedResources=n.prototype.allEmbeddedResourceArrays,n.prototype.embeddedArray=n.prototype.embeddedResourceArray,n.prototype.embedded=n.prototype.embeddedResource,n.prototype.validation=n.prototype.validationIssues,t.exports=n},{}],39:[function(e,t,i){t.exports=function(e){var t={},i=[];(e=e||this).on=function(e,i,n){(t[e]=t[e]||[]).push([i,n])},e.off=function(e,n){e||(t={});for(var r=t[e]||i,s=r.length=n?r.length:0;s--;)n==r[s][0]&&r.splice(s,1)},e.emit=function(e){for(var n,r=t[e]||i,s=r.length>0?r.slice(0,r.length):r,o=0;n=s[o++];)n[0].apply(n[1],i.slice.call(arguments,1))}}},{}]},{},[1])(1)});var air={key:"cd842d7bc5cda4c1a7a64b19cb38d889d2e1e221",aqi:"",getCity:function(){TeleportAutocomplete.init(".my-input").on("change",function(e){air.getData(e),$("h1").html(e.name),$(".input").addClass("invisible"),$("h1").addClass("slideInRight")})},getData:function(e){var t=$.ajax({url:"https://api.waqi.info/feed/geo:".concat(e.latitude,";").concat(e.longitude,"/"),method:"GET",dataType:"json",data:{token:air.key,format:"json"}}),i=$.ajax({url:"https://api.darksky.net/forecast/da4b3ace237cd614779bc70450a0ae24/".concat(e.latitude,",").concat(e.longitude,"?units=ca"),method:"GET",dataType:"jsonp",data:{format:"jsonp"}});$.when(t,i).then(function(e,t){air.display(e[0],t[0])}).fail(function(e,t){console.log("aqi: ".concat(e," weather: ").concat(t," "))})},display:function(e,t){var i=e.data.iaqi.pm25?e.data.iaqi.pm25.v:"No data for ",n=t.currently.uvIndex,r=Math.floor(t.currently.temperature),s=Math.floor(t.currently.apparentTemperature),o=t.minutely?t.minutely.summary:t.daily.summary;$(".display").removeClass("fadeOut"),$("aside").removeClass("fadeOut"),$(".display").addClass("fadeIn"),$("aside").addClass("fadeIn"),$(".shader").css("background","rgba(0, 0, 0, 0.8)"),$(".display__main").html("".concat(r,"°C")),$(".display__info").html("".concat(o)),$(".img__1").attr("src","public/assets/wtemp.svg"),$(".img__2").attr("src","public/assets/wsun.svg"),$(".img__3").attr("src","public/assets/whaze.svg"),$("#side__main").attr("data-temp",r),$("#side__main").attr("data-uv",n),$("#side__main").attr("data-pm25",i),$("#side__main").attr("data-desc",o),$(".imgText__1").html("".concat(r,"°C")),$(".imgTitle__1").html("Temperature"),$("#side__temp").attr("data-temp",r),$("#side__temp").attr("data-feel",s),$(".imgTitle__2").html("Ultra Violet Index"),$(".imgText__2").html("".concat(n,"UV")),$("#side__uv").attr("data-uv",n),$(".imgText__3").html("".concat(i," PM2.5")),$(".imgTitle__3").html("Air Quality Index"),$("#side__pm25").attr("data-pm25",i),$(".box").on("click",function(){var e=$(this).data();"side__main"===this.id?air.displayMain(e):"side__temp"===this.id?air.displayTemp(e):"side__uv"===this.id?air.displayUV(e):"side__pm25"===this.id?air.displayPM25(e):"reset"===this.id&&air.reset()})},displayMain:function(e){$(".document__gallery").removeClass("invisible"),$(".info__gallery").addClass("invisible"),$(".box").removeClass("black"),$("#side__main").addClass("black"),$(".display__main").html("".concat(e.temp,"°C")),$(".display__info").html("".concat(e.desc)),$(".img__1").attr("src","./public/assets/wtemp.svg"),$(".img__2").attr("src","./public/assets/wsun.svg"),$(".img__3").attr("src","./public/assets/whaze.svg"),$(".imgTitle__1").html("Temperature"),$(".imgTitle__2").html("Ultra Violet Index"),$(".imgTitle__3").html("Air Quality Index"),$(".imgText__1").html("".concat(e.temp,"°C")),$(".imgText__2").html("".concat(e.uv,"UV")),$(".imgText__3").html("".concat(e.pm25," PM2.5"))},displayTemp:function(e){$(".document__gallery").addClass("invisible"),$(".info__gallery").removeClass("invisible"),$(".box").removeClass("black"),$("#side__temp").addClass("black"),e.temp!==e.feel&&(e.temp<=0||e.temp>=25)?$(".display__main").html("The current temperature is ".concat(e.temp,"°C.  It feels like ").concat(e.feel)):$(".display__main").html("The current temperature is ".concat(e.temp,"°C.")),e.feel<=-55?($(".display__info").html("VERY DANGEROUS... Good luck! Exposed flesh freezes in less than 2 minutes."),$(".infoGallery__img").attr("src","./public/assets/wzombie.svg"),$(".infoGallery__p").html("Stay inside.")):e.feel<-48?($(".display__info").html("Severe risk of death!  Exposed flesh can freeze in 2 to 5 minutes!  Cover EVERYTHING.  I wouldn't go out there..."),$(".infoGallery__img").attr("src","./public/assets/wzombie.svg"),$(".infoGallery__p").html("Wear extremely warm dry clothing to stay safe.")):e.feel<-40?($(".display__info").html("Very high risk of death!  Exposed flesh can freeze in 5 to 10 minutes.  Cover all exposed skin!"),$(".infoGallery__img").attr("src","./public/assets/wzombie.svg"),$(".infoGallery__p").html("Wear very warm dry clothing to stay safe.")):e.feel<-28?($(".display__info").html("High risk of death: Exposed flesh can freeze in 10 to 30 minutes.  Cover up!"),$(".infoGallery__img").attr("src","./public/assets/wzombie.svg"),$(".infoGallery__p").html("Wear very warm dry clothing to stay safe.")):e.feel<-10?($(".display__info").html("Moderate risk of death:  Risk of hypothermia and frostbite is possible if exposed to elements for an extended period of time."),$(".infoGallery__img").attr("src","./public/assets/wcold.svg"),$(".infoGallery__p").html("Wear a warm hat and jacket to stay safe.")):e.feel<-0?($(".display__info").html("If you dress warmly and stay dry you should be ok."),$(".infoGallery__img").attr("src","./public/assets/wjacket.svg"),$(".infoGallery__p").html("Wear a warm hat and jacket to stay comfortable.")):e.feel<10?($(".display__info").html("Its pretty chilly and you should wear warm clothing."),$(".infoGallery__img").attr("src","./public/assets/wjacket.svg"),$(".infoGallery__p").html("Despite this fact most Canadians are wearing shorts and Tshirts.")):e.feel<20?($(".display__info").html("Its pretty warm."),$(".infoGallery__img").attr("src","./public/assets/whappyperson.svg"),$(".infoGallery__p").html("You may want to wear a light jacket or sweater.")):e.feel<25?($(".display__info").html("Most people would consider this to be the perfect temperature."),$(".infoGallery__img").attr("src","./public/assets/whappyperson.svg"),$(".infoGallery__p").html("No need for jackets or sweaters.")):e.feel<32?($(".display__info").html("Fairly hot. Stay hydrated."),$(".infoGallery__img").attr("src","./public/assets/wsweating.svg"),$(".infoGallery__p").html("Fatigue is possible with prolonged exposure or moderate physical activity.")):e.feel<39?($(".display__info").html("Medium risk of death from exposure.  Be sure to drink a lot of water and remain in the shade."),$(".infoGallery__img").attr("src","./public/assets/wexhaustion.svg"),$(".infoGallery__p").html("It's very HOT!  Heatstroke and dehydration are likely from exposure and physical activity.")):e.feel>39&&($(".display__info").html("High risk of death from exposure.  VERY VERY HOT!!!   "),$(".infoGallery__img").attr("src","./public/assets/wmanfire.svg"),$(".infoGallery__p").html("Do not do any physical activity outside.  Drink lots of water and stay out of the sun."))},displayUV:function(e){$(".document__gallery").addClass("invisible"),$(".info__gallery").removeClass("invisible"),$(".box").removeClass("black"),$("#side__uv").addClass("black"),$(".display__main").html("".concat(e.uv," on the UV index")),0===e.uv?($(".display__info").html("No sun no worries!"),$(".infoGallery__img").attr("src","./public/assets/whappyperson.svg"),$(".infoGallery__p").html("There is no need for sunscreen or to limit your exposure outside.")):e.uv<3?($(".display__info").html("Low ultra violet index.  "),$(".infoGallery__img").attr("src","./public/assets/whappyperson.svg"),$(".infoGallery__p").html("No sun protection needed!  Enjoy your time outside!")):e.uv<5?($(".display__info").html("Moderate ultra violet index.  Do not stay in the sun during midday."),$(".infoGallery__img").attr("src","./public/assets/what.svg"),$(".infoGallery__p").html("Wear a shirt, a hat and some sunscreen (SPF 15+).")):e.uv<8?($(".display__info").html("High ultra violet index.  Avoid the sun especially during midday.  "),$(".infoGallery__img").attr("src","./public/assets/wmanfire.svg"),$(".infoGallery__p").html("Wearing a shirt, a hat, sunglasses and some sunscreen (SPF 15+) is HIGHLY recommended.")):e.uv<11?($(".display__info").html("Very high ultra violet index.  Avoid the sun if possible.  If you need to go outside wear a shirt, a hat, sunglasses, sunscreen (SPF 15+) and limit exposure to the sun."),$(".infoGallery__img").attr("src","./public/assets/wmanonfire.svg"),$(".infoGallery__p").html("If you need to go outside wear a shirt, a hat, sunglasses, sunscreen (SPF 15+) and limit exposure to the sun.")):($(".display__info").html("EXTREME ultraviolet index.  Avoid exposure.  If you must go outside cover exposed skin, constantly re-apply sunscreen and seek shade."),$(".infoGallery__img").attr("src","./public/assets/wwildfire.svg"),$(".infoGallery__p").html("If you must go outside cover exposed skin, constantly re-apply sunscreen and seek shade."))},displayPM25:function(e){$(".document__gallery").addClass("invisible"),$(".info__gallery").removeClass("invisible"),$(".box").removeClass("black"),$("#side__pm25").addClass("black");var t=Math.floor(e.pm25/25);1===t?$(".infoGallery__p").html("Breathing this air for 24 hours is equivalent to smoking one cigarette."):$(".infoGallery__p").html("Breathing this air for 24 hours is equivalent to smoking ".concat(t," cigarettes.")),$(".display__main").html("".concat(e.pm25," PM25.")),0===t?($(".display__info").html("Air quality is very good.  Go outside and breath deep!"),$(".infoGallery__img").attr("src","./public/assets/wtree.svg")):1===t?($(".display__info").html("Air quality is very good.  Go outside and breath deep!"),$(".infoGallery__img").attr("src","./public/assets/wsmoker.svg")):2===t?($(".display__info").html("Air quality is very good.  Go outside and breath deep!"),$(".infoGallery__img").attr("src","./public/assets/w2ciggs.svg")):3===t?($(".display__info").html("Air quality is very good.  Go outside and breath deep!"),$(".infoGallery__img").attr("src","./public/assets/w3ciggs.svg")):e.pm25<=100?($(".display__info").html("Air quality is moderate.  People with respiratory diseases should limit outdoor exposure."),$(".infoGallery__img").attr("src","./public/assets/w3ciggs.svg")):e.pm25<=150?($(".display__info").html("Air quality is unhealthy for at risk groups such as infants, the elderly and those with respiratory disease.  Limit outdoor exposure and wear an air filtration mask."),$(".infoGallery__img").attr("src","./public/assets/w3ciggs.svg")):e.pm25<=200?($(".display__info").html("Air quality is unhealthy.  You should not do physical activity outdoors.  Wear an air filtration mask to limit harmful effects of the poor air quality."),$(".infoGallery__img").attr("src","./public/assets/w3ciggs.svg")):e.pm25<=300?($(".display__info").html("Air quality is very unhealthy.  Everyone should limit their outdoor exposure.  When going outside be sure to wear an appropriate air filtration mask such as those with an N95 safety rating."),$(".infoGallery__img").attr("src","./public/assets/w3ciggs.svg")):e.pm25>300&&($(".display__info").html("Air quality is hazardous.  Do not go outside without an N95 filtration mask."),$(".infoGallery__img").attr("src","./public/assets/w3ciggs.svg"))},reset:function(){$(".display").addClass("fadeOut"),$("aside").addClass("fadeOut"),$(".display").removeClass("fadeIn"),$("aside").removeClass("fadeIn"),$(".input").removeClass("invisible")}};air.getCity();
//# sourceMappingURL=index-min.js.map
