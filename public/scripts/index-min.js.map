{"version":3,"sources":["autocomplete.js","main.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","f","exports","module","define","amd","window","global","self","this","TeleportAutocomplete","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_dereq_","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","_interopRequireDefault","__esModule","default","_halfred2","_minivents2","_coreJsLibraryFnObjectAssign2","_coreJsLibraryFnArrayFind2","_coreJsLibraryFnRegexpEscape2","_debounce2","Key","BACK","TAB","ENTER","UP","DOWN","ITEM_TEMPLATE","item","wrapMatches","title","HTMLElement","on","addEventListener","off","removeEventListener","_this","_ref","arguments","undefined","_ref$el","el","_ref$maxItems","maxItems","_ref$itemTemplate","itemTemplate","_ref$geoLocate","geoLocate","_ref$apiRoot","apiRoot","_ref$apiVersion","apiVersion","_ref$embeds","embeds","instance","TypeError","_classCallCheck","elem","document","querySelector","setupInput","results","_activeIndex","_cache","_query","query","fetchResults","getResultByTitle","emit","getCities","get","set","index","oldNode","list","childNodes","classList","remove","activeNode","add","toggle","container","oninput","onkeydown","onfocus","onblur","onclick","parentNode","replaceChild","removeChild","selectByIndex","HTMLInputElement","insertAdjacentHTML","previousSibling","firstChild","input","insertBefore","bind","onlistclick","event","indexOf","children","closest","select","renderList","innerHTML","_this2","keyCode","preventDefault","clear","activeIndex","Math","max","min","oldValue","isGeolocate","contains","currentLocation","res","split","filter","qr","forEach","matcher","RegExp","replace","_this3","_ref2$geoLocate","map","slice","join","_this4","cb","req","abort","cached","loading","_this5","XMLHttpRequest","embed","oldPlaceholder","placeholder","navigator","geolocation","getCurrentPosition","_ref3","coords","open","latitude","longitude","setRequestHeader","parseLocation","JSON","parse","response","send","_ref4","message","setTimeout","timeout","json","nearest","embeddedArray","parseCity","focus","_this6","encodeURIComponent","city","embedded","country","admin1_division","timezone","urban_area","fullName","full_name","name","geonameId","geoname_id","population","_city$location$latlon","location","latlon","_res$matching_full_name","matching_full_name","result","_city$admin1_division","admin1Division","admin1DivisionCode","geonames_admin1_code","tzNow","tzOffsetMinutes","total_offset_min","_city$urban_area","uaSlug","slug","uaName","uaId","ua_id","uaCityUrl","teleport_city_url","options","classlist-polyfill","core-js/library/fn/array/find","core-js/library/fn/object/assign","core-js/library/fn/regexp/escape","debounce","element-closest","halfred","minivents","2","createElement","createElementNS","testElement","createMethod","method","original","DOMTokenList","token","len","_toggle","force","view","elemCtrProto","Element","objCtr","strTrim","String","trim","arrIndexOf","Array","DOMEx","type","DOMException","checkTokenAndGetIndex","test","ClassList","trimmedClasses","getAttribute","classes","push","_updateClassName","setAttribute","toString","classListProto","classListGetter","tokens","updated","splice","classListPropDesc","ex","number","__defineGetter__","3","find","../../modules/$.core","../../modules/es6.array.find","4","assign","../../modules/es6.object.assign","5","escape","../../modules/es7.regexp.escape","6","it","7","8","ctx","IObject","toObject","toLength","asc","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","callbackfn","that","val","O","./$.array-species-create","./$.ctx","./$.iobject","./$.to-length","./$.to-object","9","isObject","isArray","SPECIES","C","./$.is-array","./$.is-object","./$.wks","10","11","core","version","__e","12","aFunction","fn","b","c","apply","./$.a-function","13","14","$export","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","param","Function","./$.core","./$.global","15","exec","16","__g","17","cof","propertyIsEnumerable","./$.cof","18","arg","19","20","$Object","create","getProto","getPrototypeOf","isEnum","getDesc","getOwnPropertyDescriptor","setDesc","setDescs","getKeys","keys","getNames","getOwnPropertyNames","getSymbols","getOwnPropertySymbols","each","21","$","A","K","k","T","$$","$$len","concat","j","./$","./$.fails","22","regExp","replacer","part","23","store","24","ceil","floor","isNaN","25","toInteger","./$.to-integer","26","defined","./$.defined","27","id","px","random","28","uid","_Symbol","./$.shared","./$.uid","29","$find","forced","./$.add-to-unscopables","./$.array-methods","./$.export","30","./$.object-assign","31","$re","./$.replacer","32","Date","now","getTime","33","func","wait","immediate","args","context","timestamp","later","last","callNow","date-now","34","ELEMENT","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","selector","element","parentElement","35","Parser","Resource","validationFlag","unparsed","enableValidation","flag","disableValidation","./lib/parser","./lib/resource","36","ImmutableStack","_array","array","isEmpty","pop","peek","37","Stack","linkSpec","href","required","defaultValue","templated","deprecation","profile","hreflang","_parse","validation","path","linkArrays","allLinkArrays","links","parseHalProperty","parseLink","reportValidationIssue","parseLinks","_links","curies","allEmbeddedArrays","parentValidation","identity","embeddedElement","embeddedResource","_original","parseEmbeddedResourcess","_embedded","resource","copyNonHalProperties","property","processingFunction","copy","object","arrayfy","linkKey","link","shallowCopy","pathToString","console","log","substring","./immutable_stack","./resource","38","validationIssues","_initCuries","_validation","propertyArray","elementOfPropertyArray","_curiesMap","_curies","curie","_preResolveCuries","_resolvedCuriesMap","rel","_preResolveCurie","prefixAndReference","candidate","linkArray","hasCuries","curieArray","reverseResolveCurie","fullUrl","allEmbeddedResourceArrays","embeddedResourceArray","allLinks","allEmbeddedResources","39","air","aqi","getCity","init","returned","getData","html","addClass","ajax","url","dataType","data","format","weather","when","then","aqiReturned","weatherReturned","display","fail","errAqi","errWeather","pm25","iaqi","v","uv","currently","uvIndex","temp","temperature","windFeel","apparentTemperature","weatherDescription","minutely","summary","daily","css","attr","displayMain","displayTemp","displayUV","displayPM25","removeClass","desc","feel","ciggs"],"mappings":"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","sourcesContent":["/*! teleport-autocomplete - v0.3.3 | https://github.com/teleport/autocomplete#readme | MIT */\r\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.TeleportAutocomplete = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\r\n'use strict';\r\n\r\nObject.defineProperty(exports, '__esModule', {\r\n  value: true\r\n});\r\n\r\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\r\n\r\n_dereq_('classlist-polyfill');\r\n\r\n_dereq_('element-closest'); \r\n \r\nvar _halfred = _dereq_('halfred');\r\n\r\nvar _halfred2 = _interopRequireDefault(_halfred);\r\n\r\nvar _minivents = _dereq_('minivents');\r\n\r\nvar _minivents2 = _interopRequireDefault(_minivents);\r\n\r\nvar _coreJsLibraryFnObjectAssign = _dereq_('core-js/library/fn/object/assign');\r\n\r\nvar _coreJsLibraryFnObjectAssign2 = _interopRequireDefault(_coreJsLibraryFnObjectAssign);\r\n\r\nvar _coreJsLibraryFnArrayFind = _dereq_('core-js/library/fn/array/find');\r\n\r\nvar _coreJsLibraryFnArrayFind2 = _interopRequireDefault(_coreJsLibraryFnArrayFind);\r\n\r\nvar _coreJsLibraryFnRegexpEscape = _dereq_('core-js/library/fn/regexp/escape');\r\n\r\nvar _coreJsLibraryFnRegexpEscape2 = _interopRequireDefault(_coreJsLibraryFnRegexpEscape);\r\n\r\nvar _debounce = _dereq_('debounce');\r\n\r\nvar _debounce2 = _interopRequireDefault(_debounce);\r\n\r\nvar Key = { BACK: 8, TAB: 9, ENTER: 13, UP: 38, DOWN: 40 };\r\nvar CONTAINER_TEMPLATE = '<div class=\"tp-autocomplete\"><ul class=\"tp-ac__list\"></ul></div>';\r\nvar INPUT_CLASS = 'tp-ac__input';\r\nvar itemWrapperTemplate = function itemWrapperTemplate(item) {\r\n  return '<li class=\"tp-ac__item\">' + item + '</li>';\r\n};\r\nvar NO_RESULTS_TEMPLATE = '<li class=\"tp-ac__item no-results\">No matches</li>';\r\nvar GEOLOCATE_TEMPLATE = '<li class=\"tp-ac__item geolocate\">Detect my current location</li>';\r\n\r\n// Default item template, wraps title matches\r\nvar ITEM_TEMPLATE = function renderItem(item) {\r\n  return this.wrapMatches(item.title);\r\n};\r\n\r\n// Shorthands\r\nHTMLElement.prototype.on = HTMLElement.prototype.addEventListener;\r\nHTMLElement.prototype.off = HTMLElement.prototype.removeEventListener;\r\n\r\n/**\r\n * Teleport Cities Autocomplete\r\n */\r\n\r\nvar TeleportAutocomplete = (function () {\r\n  _createClass(TeleportAutocomplete, [{\r\n    key: 'query',\r\n    get: function get() {\r\n      return this._query;\r\n    },\r\n    set: function set(query) {\r\n      if (query === this._query) return query;\r\n\r\n      this._query = query;\r\n      this.el.value = query;\r\n      this.emit('querychange', query);\r\n    }\r\n  }, {\r\n    key: 'activeIndex',\r\n    get: function get() {\r\n      return this._activeIndex;\r\n    },\r\n    set: function set(index) {\r\n      // Remove old highlight\r\n      var oldNode = this.list.childNodes[this._activeIndex];\r\n      if (oldNode) oldNode.classList.remove('is-active');\r\n\r\n      this._activeIndex = index;\r\n\r\n      // Set highlight\r\n      var activeNode = this.list.childNodes[index];\r\n      if (activeNode) activeNode.classList.add('is-active');\r\n    }\r\n\r\n    // Show or hide loading\r\n  }, {\r\n    key: 'loading',\r\n    set: function set(toggle) {\r\n      this.container.classList.toggle('spinner', toggle);\r\n    }\r\n\r\n    /**\r\n     * Parse arguments and wrap input\r\n     */\r\n  }]);\r\n\r\n  function TeleportAutocomplete() {\r\n    var _this = this;\r\n\r\n    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\r\n\r\n    var _ref$el = _ref.el;\r\n    var el = _ref$el === undefined ? null : _ref$el;\r\n    var value = _ref.value;\r\n    var _ref$maxItems = _ref.maxItems;\r\n    var maxItems = _ref$maxItems === undefined ? 10 : _ref$maxItems;\r\n    var _ref$itemTemplate = _ref.itemTemplate;\r\n    var itemTemplate = _ref$itemTemplate === undefined ? ITEM_TEMPLATE : _ref$itemTemplate;\r\n    var _ref$geoLocate = _ref.geoLocate;\r\n    var geoLocate = _ref$geoLocate === undefined ? true : _ref$geoLocate;\r\n    var _ref$apiRoot = _ref.apiRoot;\r\n    var apiRoot = _ref$apiRoot === undefined ? 'https://api.teleport.org/api' : _ref$apiRoot;\r\n    var _ref$apiVersion = _ref.apiVersion;\r\n    var apiVersion = _ref$apiVersion === undefined ? 1 : _ref$apiVersion;\r\n    var _ref$embeds = _ref.embeds;\r\n    var embeds = _ref$embeds === undefined ? 'city:country,city:admin1_division,city:timezone/tz:offsets-now,city:urban_area' : _ref$embeds;\r\n\r\n    _classCallCheck(this, TeleportAutocomplete);\r\n\r\n    (0, _minivents2['default'])(this);\r\n\r\n    var elem = typeof el === 'string' ? document.querySelector(el) : el;\r\n    this.setupInput(elem);\r\n\r\n    (0, _coreJsLibraryFnObjectAssign2['default'])(this, {\r\n      maxItems: maxItems, geoLocate: geoLocate, apiRoot: apiRoot, apiVersion: apiVersion, itemTemplate: itemTemplate, embeds: embeds, results: [],\r\n      _activeIndex: 0, _cache: {}, _query: this.el.value, value: value\r\n    });\r\n\r\n    // Prefetch results\r\n    if (this.value && this.value.title) {\r\n      this.query = this.value.title;\r\n    } else if (this.query) {\r\n      this.fetchResults(function () {\r\n        _this.value = _this.getResultByTitle(_this.query);\r\n        _this.emit('change', _this.value);\r\n      });\r\n    }\r\n\r\n    this.getCities = (0, _debounce2['default'])(this.getCities, 200);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Init shorthand\r\n   */\r\n\r\n  _createClass(TeleportAutocomplete, [{\r\n    key: 'destroy',\r\n\r\n    /**\r\n     * Clean up the container\r\n     */\r\n    value: function destroy() {\r\n      this.el.off('input', this.oninput);\r\n      this.el.off('keydown', this.onkeydown);\r\n      this.el.off('focus', this.onfocus);\r\n      this.el.off('blur', this.onblur);\r\n      this.el.off('click', this.onclick);\r\n\r\n      this.el.classList.remove(INPUT_CLASS);\r\n\r\n      var containerParent = this.container.parentNode;\r\n      containerParent.replaceChild(this.el.parentNode.removeChild(this.el), this.container);\r\n    }\r\n\r\n    /**\r\n     * Clear the selected value\r\n     */\r\n  }, {\r\n    key: 'clear',\r\n    value: function clear() {\r\n      this.results = [];\r\n      this.selectByIndex(0);\r\n    }\r\n\r\n    /**\r\n     * Wrap input node in container\r\n     */\r\n  }, {\r\n    key: 'setupInput',\r\n    value: function setupInput(el) {\r\n      if (!el || !(el instanceof HTMLInputElement)) throw new Error('Invalid element given');\r\n\r\n      el.insertAdjacentHTML('beforebegin', CONTAINER_TEMPLATE);\r\n      Object.defineProperty(this, 'container', { value: el.previousSibling });\r\n      Object.defineProperty(this, 'list', { value: this.container.firstChild });\r\n\r\n      var input = this.container.insertBefore(el.parentNode.removeChild(el), this.list);\r\n      input.classList.add(INPUT_CLASS);\r\n\r\n      Object.defineProperty(this, 'el', { enumerable: true, value: input });\r\n\r\n      this.el.on('input', this.oninput.bind(this));\r\n      this.el.on('keydown', this.onkeydown.bind(this));\r\n      this.el.on('focus', this.onfocus.bind(this));\r\n      this.el.on('blur', this.onblur.bind(this));\r\n      this.el.on('click', this.onclick.bind(this));\r\n\r\n      this.list.on('mousedown', this.onlistclick.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Event handlers\r\n     */\r\n\r\n    // Clicked on list item, select item\r\n  }, {\r\n    key: 'onlistclick',\r\n    value: function onlistclick(event) {\r\n      var index = [].indexOf.call(this.list.children, event.target.closest('.tp-ac__item'));\r\n      this.selectByIndex(index);\r\n    }\r\n\r\n    // Select text on click\r\n  }, {\r\n    key: 'onclick',\r\n    value: function onclick() {\r\n      this.el.select();\r\n    }\r\n\r\n    // Input has focus, open list\r\n  }, {\r\n    key: 'onfocus',\r\n    value: function onfocus() {\r\n      this.renderList();\r\n    }\r\n\r\n    // Input lost focus, close list\r\n  }, {\r\n    key: 'onblur',\r\n    value: function onblur() {\r\n      this.list.innerHTML = '';\r\n    }\r\n\r\n    // Input was typed into\r\n  }, {\r\n    key: 'oninput',\r\n    value: function oninput() {\r\n      var _this2 = this;\r\n\r\n      this._query = this.el.value;\r\n      this.fetchResults(function () {\r\n        return _this2.renderList();\r\n      });\r\n    }\r\n\r\n    // Called on keypresses\r\n  }, {\r\n    key: 'onkeydown',\r\n    value: function onkeydown(event) {\r\n      var code = event.keyCode;\r\n\r\n      // Prevent cursor move\r\n      if ([Key.UP, Key.DOWN].indexOf(code) !== -1) event.preventDefault();\r\n\r\n      switch (code) {\r\n        case Key.BACK:\r\n          // Clear filled value or last char\r\n          if (this.value || this.query.length === 1) this.clear();\r\n          break;\r\n        case Key.ENTER:\r\n          // Prevent submit if query is to be selected\r\n          if (!this.value && this.query) event.preventDefault();\r\n          this.selectByIndex(this.activeIndex);\r\n          break;\r\n        case Key.TAB:\r\n          if (!this.value) this.selectByIndex(this.activeIndex);\r\n          break;\r\n        case Key.UP:\r\n          this.activeIndex = Math.max(0, this.activeIndex - 1);\r\n          break;\r\n        case Key.DOWN:\r\n          this.activeIndex = Math.min(this.results.length - 1, this.activeIndex + 1);\r\n          break;\r\n      }\r\n    }\r\n\r\n    // ---------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Select option from list by index\r\n     */\r\n  }, {\r\n    key: 'selectByIndex',\r\n    value: function selectByIndex(index) {\r\n      this.activeIndex = index;\r\n      var oldValue = this.value;\r\n      this.value = this.results[index] || null;\r\n\r\n      var isGeolocate = this.list.firstChild && this.list.firstChild.classList.contains('geolocate');\r\n      if (isGeolocate) this.currentLocation();\r\n\r\n      if (oldValue !== this.value && !isGeolocate) this.emit('change', this.value);\r\n\r\n      this.list.innerHTML = '';\r\n      this.query = this.value ? this.value.title : '';\r\n    }\r\n\r\n    /**\r\n     * Wrap matching result names in <span>s\r\n     */\r\n  }, {\r\n    key: 'wrapMatches',\r\n    value: function wrapMatches() {\r\n      var str = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\r\n\r\n      var res = str;\r\n\r\n      this.query.split(/[\\,\\s]+/).filter(function (qr) {\r\n        return !!qr;\r\n      }).forEach(function (query) {\r\n        var matcher = new RegExp((0, _coreJsLibraryFnRegexpEscape2['default'])(query) + '(?![^<]*>|[^<>]*<\\/)', 'gi');\r\n        res = res.replace(matcher, '<span>$&</span>');\r\n      });\r\n\r\n      return res;\r\n    }\r\n\r\n    /**\r\n     * Render result list\r\n     */\r\n  }, {\r\n    key: 'renderList',\r\n    value: function renderList() {\r\n      var _this3 = this;\r\n\r\n      var _ref2 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\r\n\r\n      var _ref2$geoLocate = _ref2.geoLocate;\r\n      var geoLocate = _ref2$geoLocate === undefined ? this.geoLocate : _ref2$geoLocate;\r\n\r\n      var results = this.results.map(function (res) {\r\n        return itemWrapperTemplate(_this3.itemTemplate(res));\r\n      }).slice(0, this.maxItems).join('');\r\n\r\n      if (!results && this.query !== '' && !this.value) results = NO_RESULTS_TEMPLATE;\r\n      if (this.query === '' && geoLocate) results = GEOLOCATE_TEMPLATE;\r\n      this.list.innerHTML = results;\r\n\r\n      this.activeIndex = 0;\r\n    }\r\n\r\n    /**\r\n     * Fetch value from results by title\r\n     */\r\n  }, {\r\n    key: 'getResultByTitle',\r\n    value: function getResultByTitle(title) {\r\n      if (!this.results || !title) return null;\r\n      return (0, _coreJsLibraryFnArrayFind2['default'])(this.results, function (res) {\r\n        return res.title.indexOf(title) !== -1;\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Fetch picker data from cache or API\r\n     */\r\n  }, {\r\n    key: 'fetchResults',\r\n    value: function fetchResults() {\r\n      var _this4 = this;\r\n\r\n      var cb = arguments.length <= 0 || arguments[0] === undefined ? function noop() {} : arguments[0];\r\n\r\n      // Cancel old request\r\n      if (this.req) this.req.abort();\r\n\r\n      var cached = this._cache[this.query];\r\n      if (cached) {\r\n        this.results = cached;\r\n        return cb();\r\n      }\r\n\r\n      this.req = this.getCities(function (results) {\r\n        _this4.results = _this4._cache[_this4.query] = results;\r\n        cb();\r\n        _this4.loading = false;\r\n      });\r\n\r\n      this.loading = true;\r\n    }\r\n\r\n    /**\r\n     * Geolocate current city\r\n     */\r\n  }, {\r\n    key: 'currentLocation',\r\n    value: function currentLocation() {\r\n      var _this5 = this;\r\n\r\n      var req = new XMLHttpRequest();\r\n      var embed = 'location:nearest-cities/location:nearest-city/' + (this.embeds ? '{' + this.embeds + '}' : '');\r\n\r\n      this.loading = true;\r\n      this.oldPlaceholder = this.el.placeholder;\r\n      this.el.placeholder = 'Detecting location...';\r\n\r\n      navigator.geolocation.getCurrentPosition(function (_ref3) {\r\n        var coords = _ref3.coords;\r\n\r\n        req.open('GET', _this5.apiRoot + '/locations/' + coords.latitude + ',' + coords.longitude + '/?embed=' + embed);\r\n        req.setRequestHeader('Accept', 'application/vnd.teleport.v' + _this5.apiVersion + '+json');\r\n        req.addEventListener('load', function () {\r\n          return _this5.parseLocation(JSON.parse(req.response));\r\n        });\r\n        req.send();\r\n      }, function (_ref4) {\r\n        var message = _ref4.message;\r\n\r\n        _this5.loading = false;\r\n        _this5.el.placeholder = message;\r\n        setTimeout(function () {\r\n          return _this5.el.placeholder = _this5.oldPlaceholder;\r\n        }, 3000);\r\n      }, { timeout: 5000 });\r\n    }\r\n\r\n    /**\r\n     * Parse current location API response\r\n     */\r\n  }, {\r\n    key: 'parseLocation',\r\n    value: function parseLocation(json) {\r\n      var res = _halfred2['default'].parse(json);\r\n      var nearest = res.embeddedArray('location:nearest-cities')[0];\r\n      if (nearest) {\r\n        this.results = [this.parseCity(nearest)];\r\n        if (this.geoLocate === 'nopick') {\r\n          this.el.focus();\r\n          this.renderList({ geoLocate: false });\r\n        } else {\r\n          this.selectByIndex(0);\r\n        }\r\n      }\r\n      this.loading = false;\r\n      this.el.placeholder = this.oldPlaceholder;\r\n    }\r\n\r\n    /**\r\n     * Make the API call\r\n     */\r\n  }, {\r\n    key: 'getCities',\r\n    value: function getCities(cb) {\r\n      var _this6 = this;\r\n\r\n      if (!this.query) return cb([]);\r\n      var embed = 'city:search-results/city:item/' + (this.embeds ? '{' + this.embeds + '}' : '');\r\n\r\n      var req = new XMLHttpRequest();\r\n      var query = encodeURIComponent(this.query);\r\n      req.open('GET', this.apiRoot + '/cities/?search=' + query + '&embed=' + embed + '&limit=' + this.maxItems);\r\n      req.setRequestHeader('Accept', 'application/vnd.teleport.v' + this.apiVersion + '+json');\r\n      req.addEventListener('load', function () {\r\n        var results = _halfred2['default'].parse(JSON.parse(req.response)).embeddedArray('city:search-results').map(function (res) {\r\n          return _this6.parseCity(res);\r\n        });\r\n\r\n        cb(results);\r\n      });\r\n      req.send();\r\n\r\n      return req;\r\n    }\r\n\r\n    /**\r\n     * Parse city\r\n     */\r\n  }, {\r\n    key: 'parseCity',\r\n    value: function parseCity(res) {\r\n      var city = res.embedded('location:nearest-city') || res.embedded('city:item');\r\n      city.country = city.embedded('city:country');\r\n      city.admin1_division = city.embedded('city:admin1_division');\r\n      city.timezone = city.embedded('city:timezone');\r\n      city.urban_area = city.embedded('city:urban_area');\r\n\r\n      var fullName = city.full_name;\r\n      var name = city.name;\r\n      var geonameId = city.geoname_id;\r\n      var population = city.population;\r\n      var _city$location$latlon = city.location.latlon;\r\n      var latitude = _city$location$latlon.latitude;\r\n      var longitude = _city$location$latlon.longitude;\r\n      var _res$matching_full_name = res.matching_full_name;\r\n      var title = _res$matching_full_name === undefined ? fullName : _res$matching_full_name;\r\n\r\n      var result = { title: title, name: name, geonameId: geonameId, latitude: latitude, longitude: longitude, population: population };\r\n\r\n      if (city.country) (0, _coreJsLibraryFnObjectAssign2['default'])(result, { country: city.country.name });\r\n      if (city.admin1_division) {\r\n        var _city$admin1_division = city.admin1_division;\r\n        var admin1Division = _city$admin1_division.name;\r\n        var admin1DivisionCode = _city$admin1_division.geonames_admin1_code;\r\n\r\n        (0, _coreJsLibraryFnObjectAssign2['default'])(result, { admin1Division: admin1Division, admin1DivisionCode: admin1DivisionCode });\r\n      }\r\n\r\n      if (city.timezone) {\r\n        var tzNow = city.timezone.embedded('tz:offsets-now');\r\n        (0, _coreJsLibraryFnObjectAssign2['default'])(result, { tzOffsetMinutes: tzNow.total_offset_min });\r\n      }\r\n\r\n      if (city.urban_area) {\r\n        var _city$urban_area = city.urban_area;\r\n        var uaSlug = _city$urban_area.slug;\r\n        var uaName = _city$urban_area.name;\r\n        var uaId = _city$urban_area.ua_id;\r\n        var uaCityUrl = _city$urban_area.teleport_city_url;\r\n\r\n        (0, _coreJsLibraryFnObjectAssign2['default'])(result, { uaName: uaName, uaId: uaId, uaCityUrl: uaCityUrl, uaSlug: uaSlug });\r\n      }\r\n\r\n      return result;\r\n    }\r\n  }], [{\r\n    key: 'init',\r\n    value: function init(el) {\r\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\r\n\r\n      var opt = typeof el === 'string' || el instanceof HTMLInputElement ? (0, _coreJsLibraryFnObjectAssign2['default'])(options, { el: el }) : el;\r\n      return new TeleportAutocomplete(opt);\r\n    }\r\n  }]);\r\n\r\n  return TeleportAutocomplete;\r\n})();\r\n\r\nexports['default'] = TeleportAutocomplete;\r\nmodule.exports = exports['default'];\r\n\r\n},{\"classlist-polyfill\":2,\"core-js/library/fn/array/find\":3,\"core-js/library/fn/object/assign\":4,\"core-js/library/fn/regexp/escape\":5,\"debounce\":33,\"element-closest\":34,\"halfred\":35,\"minivents\":39}],2:[function(_dereq_,module,exports){\r\n/*\r\n * classList.js: Cross-browser full element.classList implementation.\r\n * 2014-07-23\r\n *\r\n * By Eli Grey, http://eligrey.com\r\n * Public Domain.\r\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\r\n */\r\n\r\n/*global self, document, DOMException */\r\n\r\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/\r\n\r\n/* Copied from MDN:\r\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/classList\r\n */\r\n\r\nif (\"document\" in window.self) {\r\n\r\n  // Full polyfill for browsers with no classList support\r\n  // Including IE < Edge missing SVGElement.classList\r\n  if (!(\"classList\" in document.createElement(\"_\"))\r\n    || document.createElementNS && !(\"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\"))) {\r\n\r\n  (function (view) {\r\n\r\n    \"use strict\";\r\n\r\n    if (!('Element' in view)) return;\r\n\r\n    var\r\n        classListProp = \"classList\"\r\n      , protoProp = \"prototype\"\r\n      , elemCtrProto = view.Element[protoProp]\r\n      , objCtr = Object\r\n      , strTrim = String[protoProp].trim || function () {\r\n        return this.replace(/^\\s+|\\s+$/g, \"\");\r\n      }\r\n      , arrIndexOf = Array[protoProp].indexOf || function (item) {\r\n        var\r\n            i = 0\r\n          , len = this.length\r\n        ;\r\n        for (; i < len; i++) {\r\n          if (i in this && this[i] === item) {\r\n            return i;\r\n          }\r\n        }\r\n        return -1;\r\n      }\r\n      // Vendors: please allow content code to instantiate DOMExceptions\r\n      , DOMEx = function (type, message) {\r\n        this.name = type;\r\n        this.code = DOMException[type];\r\n        this.message = message;\r\n      }\r\n      , checkTokenAndGetIndex = function (classList, token) {\r\n        if (token === \"\") {\r\n          throw new DOMEx(\r\n              \"SYNTAX_ERR\"\r\n            , \"An invalid or illegal string was specified\"\r\n          );\r\n        }\r\n        if (/\\s/.test(token)) {\r\n          throw new DOMEx(\r\n              \"INVALID_CHARACTER_ERR\"\r\n            , \"String contains an invalid character\"\r\n          );\r\n        }\r\n        return arrIndexOf.call(classList, token);\r\n      }\r\n      , ClassList = function (elem) {\r\n        var\r\n            trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\r\n          , classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : []\r\n          , i = 0\r\n          , len = classes.length\r\n        ;\r\n        for (; i < len; i++) {\r\n          this.push(classes[i]);\r\n        }\r\n        this._updateClassName = function () {\r\n          elem.setAttribute(\"class\", this.toString());\r\n        };\r\n      }\r\n      , classListProto = ClassList[protoProp] = []\r\n      , classListGetter = function () {\r\n        return new ClassList(this);\r\n      }\r\n    ;\r\n    // Most DOMException implementations don't allow calling DOMException's toString()\r\n    // on non-DOMExceptions. Error's toString() is sufficient here.\r\n    DOMEx[protoProp] = Error[protoProp];\r\n    classListProto.item = function (i) {\r\n      return this[i] || null;\r\n    };\r\n    classListProto.contains = function (token) {\r\n      token += \"\";\r\n      return checkTokenAndGetIndex(this, token) !== -1;\r\n    };\r\n    classListProto.add = function () {\r\n      var\r\n          tokens = arguments\r\n        , i = 0\r\n        , l = tokens.length\r\n        , token\r\n        , updated = false\r\n      ;\r\n      do {\r\n        token = tokens[i] + \"\";\r\n        if (checkTokenAndGetIndex(this, token) === -1) {\r\n          this.push(token);\r\n          updated = true;\r\n        }\r\n      }\r\n      while (++i < l);\r\n\r\n      if (updated) {\r\n        this._updateClassName();\r\n      }\r\n    };\r\n    classListProto.remove = function () {\r\n      var\r\n          tokens = arguments\r\n        , i = 0\r\n        , l = tokens.length\r\n        , token\r\n        , updated = false\r\n        , index\r\n      ;\r\n      do {\r\n        token = tokens[i] + \"\";\r\n        index = checkTokenAndGetIndex(this, token);\r\n        while (index !== -1) {\r\n          this.splice(index, 1);\r\n          updated = true;\r\n          index = checkTokenAndGetIndex(this, token);\r\n        }\r\n      }\r\n      while (++i < l);\r\n\r\n      if (updated) {\r\n        this._updateClassName();\r\n      }\r\n    };\r\n    classListProto.toggle = function (token, force) {\r\n      token += \"\";\r\n\r\n      var\r\n          result = this.contains(token)\r\n        , method = result ?\r\n          force !== true && \"remove\"\r\n        :\r\n          force !== false && \"add\"\r\n      ;\r\n\r\n      if (method) {\r\n        this[method](token);\r\n      }\r\n\r\n      if (force === true || force === false) {\r\n        return force;\r\n      } else {\r\n        return !result;\r\n      }\r\n    };\r\n    classListProto.toString = function () {\r\n      return this.join(\" \");\r\n    };\r\n\r\n    if (objCtr.defineProperty) {\r\n      var classListPropDesc = {\r\n          get: classListGetter\r\n        , enumerable: true\r\n        , configurable: true\r\n      };\r\n      try {\r\n        objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n      } catch (ex) { // IE 8 doesn't support enumerable:true\r\n        if (ex.number === -0x7FF5EC54) {\r\n          classListPropDesc.enumerable = false;\r\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n        }\r\n      }\r\n    } else if (objCtr[protoProp].__defineGetter__) {\r\n      elemCtrProto.__defineGetter__(classListProp, classListGetter);\r\n    }\r\n\r\n    }(window.self));\r\n\r\n    } else {\r\n    // There is full or partial native classList support, so just check if we need\r\n    // to normalize the add/remove and toggle APIs.\r\n\r\n    (function () {\r\n      \"use strict\";\r\n\r\n      var testElement = document.createElement(\"_\");\r\n\r\n      testElement.classList.add(\"c1\", \"c2\");\r\n\r\n      // Polyfill for IE 10/11 and Firefox <26, where classList.add and\r\n      // classList.remove exist but support only one argument at a time.\r\n      if (!testElement.classList.contains(\"c2\")) {\r\n        var createMethod = function(method) {\r\n          var original = DOMTokenList.prototype[method];\r\n\r\n          DOMTokenList.prototype[method] = function(token) {\r\n            var i, len = arguments.length;\r\n\r\n            for (i = 0; i < len; i++) {\r\n              token = arguments[i];\r\n              original.call(this, token);\r\n            }\r\n          };\r\n        };\r\n        createMethod('add');\r\n        createMethod('remove');\r\n      }\r\n\r\n      testElement.classList.toggle(\"c3\", false);\r\n\r\n      // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\r\n      // support the second argument.\r\n      if (testElement.classList.contains(\"c3\")) {\r\n        var _toggle = DOMTokenList.prototype.toggle;\r\n\r\n        DOMTokenList.prototype.toggle = function(token, force) {\r\n          if (1 in arguments && !this.contains(token) === !force) {\r\n            return force;\r\n          } else {\r\n            return _toggle.call(this, token);\r\n          }\r\n        };\r\n\r\n      }\r\n\r\n      testElement = null;\r\n    }());\r\n  }\r\n}\r\n\r\n},{}],3:[function(_dereq_,module,exports){\r\n_dereq_('../../modules/es6.array.find');\r\nmodule.exports = _dereq_('../../modules/$.core').Array.find;\r\n},{\"../../modules/$.core\":11,\"../../modules/es6.array.find\":29}],4:[function(_dereq_,module,exports){\r\n_dereq_('../../modules/es6.object.assign');\r\nmodule.exports = _dereq_('../../modules/$.core').Object.assign;\r\n},{\"../../modules/$.core\":11,\"../../modules/es6.object.assign\":30}],5:[function(_dereq_,module,exports){\r\n_dereq_('../../modules/es7.regexp.escape');\r\nmodule.exports = _dereq_('../../modules/$.core').RegExp.escape;\r\n},{\"../../modules/$.core\":11,\"../../modules/es7.regexp.escape\":31}],6:[function(_dereq_,module,exports){\r\nmodule.exports = function(it){\r\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\r\n  return it;\r\n};\r\n},{}],7:[function(_dereq_,module,exports){\r\nmodule.exports = function(){ /* empty */ };\r\n},{}],8:[function(_dereq_,module,exports){\r\n// 0 -> Array#forEach\r\n// 1 -> Array#map\r\n// 2 -> Array#filter\r\n// 3 -> Array#some\r\n// 4 -> Array#every\r\n// 5 -> Array#find\r\n// 6 -> Array#findIndex\r\nvar ctx      = _dereq_('./$.ctx')\r\n  , IObject  = _dereq_('./$.iobject')\r\n  , toObject = _dereq_('./$.to-object')\r\n  , toLength = _dereq_('./$.to-length')\r\n  , asc      = _dereq_('./$.array-species-create');\r\nmodule.exports = function(TYPE){\r\n  var IS_MAP        = TYPE == 1\r\n    , IS_FILTER     = TYPE == 2\r\n    , IS_SOME       = TYPE == 3\r\n    , IS_EVERY      = TYPE == 4\r\n    , IS_FIND_INDEX = TYPE == 6\r\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX;\r\n  return function($this, callbackfn, that){\r\n    var O      = toObject($this)\r\n      , self   = IObject(O)\r\n      , f      = ctx(callbackfn, that, 3)\r\n      , length = toLength(self.length)\r\n      , index  = 0\r\n      , result = IS_MAP ? asc($this, length) : IS_FILTER ? asc($this, 0) : undefined\r\n      , val, res;\r\n    for(;length > index; index++)if(NO_HOLES || index in self){\r\n      val = self[index];\r\n      res = f(val, index, O);\r\n      if(TYPE){\r\n        if(IS_MAP)result[index] = res;            // map\r\n        else if(res)switch(TYPE){\r\n          case 3: return true;                    // some\r\n          case 5: return val;                     // find\r\n          case 6: return index;                   // findIndex\r\n          case 2: result.push(val);               // filter\r\n        } else if(IS_EVERY)return false;          // every\r\n      }\r\n    }\r\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\r\n  };\r\n};\r\n},{\"./$.array-species-create\":9,\"./$.ctx\":12,\"./$.iobject\":17,\"./$.to-length\":25,\"./$.to-object\":26}],9:[function(_dereq_,module,exports){\r\n// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\r\nvar isObject = _dereq_('./$.is-object')\r\n  , isArray  = _dereq_('./$.is-array')\r\n  , SPECIES  = _dereq_('./$.wks')('species');\r\nmodule.exports = function(original, length){\r\n  var C;\r\n  if(isArray(original)){\r\n    C = original.constructor;\r\n    // cross-realm fallback\r\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\r\n    if(isObject(C)){\r\n      C = C[SPECIES];\r\n      if(C === null)C = undefined;\r\n    }\r\n  } return new (C === undefined ? Array : C)(length);\r\n};\r\n},{\"./$.is-array\":18,\"./$.is-object\":19,\"./$.wks\":28}],10:[function(_dereq_,module,exports){\r\nvar toString = {}.toString;\r\n\r\nmodule.exports = function(it){\r\n  return toString.call(it).slice(8, -1);\r\n};\r\n},{}],11:[function(_dereq_,module,exports){\r\nvar core = module.exports = {version: '1.2.6'};\r\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\r\n},{}],12:[function(_dereq_,module,exports){\r\n// optional / simple context binding\r\nvar aFunction = _dereq_('./$.a-function');\r\nmodule.exports = function(fn, that, length){\r\n  aFunction(fn);\r\n  if(that === undefined)return fn;\r\n  switch(length){\r\n    case 1: return function(a){\r\n      return fn.call(that, a);\r\n    };\r\n    case 2: return function(a, b){\r\n      return fn.call(that, a, b);\r\n    };\r\n    case 3: return function(a, b, c){\r\n      return fn.call(that, a, b, c);\r\n    };\r\n  }\r\n  return function(/* ...args */){\r\n    return fn.apply(that, arguments);\r\n  };\r\n};\r\n},{\"./$.a-function\":6}],13:[function(_dereq_,module,exports){\r\n// 7.2.1 RequireObjectCoercible(argument)\r\nmodule.exports = function(it){\r\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\r\n  return it;\r\n};\r\n},{}],14:[function(_dereq_,module,exports){\r\nvar global    = _dereq_('./$.global')\r\n  , core      = _dereq_('./$.core')\r\n  , ctx       = _dereq_('./$.ctx')\r\n  , PROTOTYPE = 'prototype';\r\n\r\nvar $export = function(type, name, source){\r\n  var IS_FORCED = type & $export.F\r\n    , IS_GLOBAL = type & $export.G\r\n    , IS_STATIC = type & $export.S\r\n    , IS_PROTO  = type & $export.P\r\n    , IS_BIND   = type & $export.B\r\n    , IS_WRAP   = type & $export.W\r\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\r\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\r\n    , key, own, out;\r\n  if(IS_GLOBAL)source = name;\r\n  for(key in source){\r\n    // contains in native\r\n    own = !IS_FORCED && target && key in target;\r\n    if(own && key in exports)continue;\r\n    // export native or passed\r\n    out = own ? target[key] : source[key];\r\n    // prevent global pollution for namespaces\r\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\r\n    // bind timers to global for call from export context\r\n    : IS_BIND && own ? ctx(out, global)\r\n    // wrap global constructors for prevent change them in library\r\n    : IS_WRAP && target[key] == out ? (function(C){\r\n      var F = function(param){\r\n        return this instanceof C ? new C(param) : C(param);\r\n      };\r\n      F[PROTOTYPE] = C[PROTOTYPE];\r\n      return F;\r\n    // make static versions for prototype methods\r\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\r\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\r\n  }\r\n};\r\n// type bitmap\r\n$export.F = 1;  // forced\r\n$export.G = 2;  // global\r\n$export.S = 4;  // static\r\n$export.P = 8;  // proto\r\n$export.B = 16; // bind\r\n$export.W = 32; // wrap\r\nmodule.exports = $export;\r\n},{\"./$.core\":11,\"./$.ctx\":12,\"./$.global\":16}],15:[function(_dereq_,module,exports){\r\nmodule.exports = function(exec){\r\n  try {\r\n    return !!exec();\r\n  } catch(e){\r\n    return true;\r\n  }\r\n};\r\n},{}],16:[function(_dereq_,module,exports){\r\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\r\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\r\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\r\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\r\n},{}],17:[function(_dereq_,module,exports){\r\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\r\nvar cof = _dereq_('./$.cof');\r\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\r\n  return cof(it) == 'String' ? it.split('') : Object(it);\r\n};\r\n},{\"./$.cof\":10}],18:[function(_dereq_,module,exports){\r\n// 7.2.2 IsArray(argument)\r\nvar cof = _dereq_('./$.cof');\r\nmodule.exports = Array.isArray || function(arg){\r\n  return cof(arg) == 'Array';\r\n};\r\n},{\"./$.cof\":10}],19:[function(_dereq_,module,exports){\r\nmodule.exports = function(it){\r\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\r\n};\r\n},{}],20:[function(_dereq_,module,exports){\r\nvar $Object = Object;\r\nmodule.exports = {\r\n  create:     $Object.create,\r\n  getProto:   $Object.getPrototypeOf,\r\n  isEnum:     {}.propertyIsEnumerable,\r\n  getDesc:    $Object.getOwnPropertyDescriptor,\r\n  setDesc:    $Object.defineProperty,\r\n  setDescs:   $Object.defineProperties,\r\n  getKeys:    $Object.keys,\r\n  getNames:   $Object.getOwnPropertyNames,\r\n  getSymbols: $Object.getOwnPropertySymbols,\r\n  each:       [].forEach\r\n};\r\n},{}],21:[function(_dereq_,module,exports){\r\n// 19.1.2.1 Object.assign(target, source, ...)\r\nvar $        = _dereq_('./$')\r\n  , toObject = _dereq_('./$.to-object')\r\n  , IObject  = _dereq_('./$.iobject');\r\n\r\n// should work with symbols and should have deterministic property order (V8 bug)\r\nmodule.exports = _dereq_('./$.fails')(function(){\r\n  var a = Object.assign\r\n    , A = {}\r\n    , B = {}\r\n    , S = Symbol()\r\n    , K = 'abcdefghijklmnopqrst';\r\n  A[S] = 7;\r\n  K.split('').forEach(function(k){ B[k] = k; });\r\n  return a({}, A)[S] != 7 || Object.keys(a({}, B)).join('') != K;\r\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\r\n  var T     = toObject(target)\r\n    , $$    = arguments\r\n    , $$len = $$.length\r\n    , index = 1\r\n    , getKeys    = $.getKeys\r\n    , getSymbols = $.getSymbols\r\n    , isEnum     = $.isEnum;\r\n  while($$len > index){\r\n    var S      = IObject($$[index++])\r\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\r\n      , length = keys.length\r\n      , j      = 0\r\n      , key;\r\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\r\n  }\r\n  return T;\r\n} : Object.assign;\r\n},{\"./$\":20,\"./$.fails\":15,\"./$.iobject\":17,\"./$.to-object\":26}],22:[function(_dereq_,module,exports){\r\nmodule.exports = function(regExp, replace){\r\n  var replacer = replace === Object(replace) ? function(part){\r\n    return replace[part];\r\n  } : replace;\r\n  return function(it){\r\n    return String(it).replace(regExp, replacer);\r\n  };\r\n};\r\n},{}],23:[function(_dereq_,module,exports){\r\nvar global = _dereq_('./$.global')\r\n  , SHARED = '__core-js_shared__'\r\n  , store  = global[SHARED] || (global[SHARED] = {});\r\nmodule.exports = function(key){\r\n  return store[key] || (store[key] = {});\r\n};\r\n},{\"./$.global\":16}],24:[function(_dereq_,module,exports){\r\n// 7.1.4 ToInteger\r\nvar ceil  = Math.ceil\r\n  , floor = Math.floor;\r\nmodule.exports = function(it){\r\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\r\n};\r\n},{}],25:[function(_dereq_,module,exports){\r\n// 7.1.15 ToLength\r\nvar toInteger = _dereq_('./$.to-integer')\r\n  , min       = Math.min;\r\nmodule.exports = function(it){\r\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\r\n};\r\n},{\"./$.to-integer\":24}],26:[function(_dereq_,module,exports){\r\n// 7.1.13 ToObject(argument)\r\nvar defined = _dereq_('./$.defined');\r\nmodule.exports = function(it){\r\n  return Object(defined(it));\r\n};\r\n},{\"./$.defined\":13}],27:[function(_dereq_,module,exports){\r\nvar id = 0\r\n  , px = Math.random();\r\nmodule.exports = function(key){\r\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\r\n};\r\n},{}],28:[function(_dereq_,module,exports){\r\nvar store  = _dereq_('./$.shared')('wks')\r\n  , uid    = _dereq_('./$.uid')\r\n  , Symbol = _dereq_('./$.global').Symbol;\r\nmodule.exports = function(name){\r\n  return store[name] || (store[name] =\r\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\r\n};\r\n},{\"./$.global\":16,\"./$.shared\":23,\"./$.uid\":27}],29:[function(_dereq_,module,exports){\r\n'use strict';\r\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\r\nvar $export = _dereq_('./$.export')\r\n  , $find   = _dereq_('./$.array-methods')(5)\r\n  , KEY     = 'find'\r\n  , forced  = true;\r\n// Shouldn't skip holes\r\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\r\n$export($export.P + $export.F * forced, 'Array', {\r\n  find: function find(callbackfn/*, that = undefined */){\r\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\r\n  }\r\n});\r\n_dereq_('./$.add-to-unscopables')(KEY);\r\n},{\"./$.add-to-unscopables\":7,\"./$.array-methods\":8,\"./$.export\":14}],30:[function(_dereq_,module,exports){\r\n// 19.1.3.1 Object.assign(target, source)\r\nvar $export = _dereq_('./$.export');\r\n\r\n$export($export.S + $export.F, 'Object', {assign: _dereq_('./$.object-assign')});\r\n},{\"./$.export\":14,\"./$.object-assign\":21}],31:[function(_dereq_,module,exports){\r\n// https://github.com/benjamingr/RexExp.escape\r\nvar $export = _dereq_('./$.export')\r\n  , $re     = _dereq_('./$.replacer')(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n\r\n$export($export.S, 'RegExp', {escape: function escape(it){ return $re(it); }});\r\n\r\n},{\"./$.export\":14,\"./$.replacer\":22}],32:[function(_dereq_,module,exports){\r\nmodule.exports = Date.now || now\r\n\r\nfunction now() {\r\n    return new Date().getTime()\r\n}\r\n\r\n},{}],33:[function(_dereq_,module,exports){\r\n\r\n/**\r\n * Module dependencies.\r\n */\r\n\r\nvar now = _dereq_('date-now');\r\n\r\n/**\r\n * Returns a function, that, as long as it continues to be invoked, will not\r\n * be triggered. The function will be called after it stops being called for\r\n * N milliseconds. If `immediate` is passed, trigger the function on the\r\n * leading edge, instead of the trailing.\r\n *\r\n * @source underscore.js\r\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\r\n * @param {Function} function to wrap\r\n * @param {Number} timeout in ms (`100`)\r\n * @param {Boolean} whether to execute at the beginning (`false`)\r\n * @api public\r\n */\r\n\r\nmodule.exports = function debounce(func, wait, immediate){\r\n  var timeout, args, context, timestamp, result;\r\n  if (null == wait) wait = 100;\r\n\r\n  function later() {\r\n    var last = now() - timestamp;\r\n\r\n    if (last < wait && last > 0) {\r\n      timeout = setTimeout(later, wait - last);\r\n    } else {\r\n      timeout = null;\r\n      if (!immediate) {\r\n        result = func.apply(context, args);\r\n        if (!timeout) context = args = null;\r\n      }\r\n    }\r\n  };\r\n\r\n  return function debounced() {\r\n    context = this;\r\n    args = arguments;\r\n    timestamp = now();\r\n    var callNow = immediate && !timeout;\r\n    if (!timeout) timeout = setTimeout(later, wait);\r\n    if (callNow) {\r\n      result = func.apply(context, args);\r\n      context = args = null;\r\n    }\r\n\r\n    return result;\r\n  };\r\n};\r\n\r\n},{\"date-now\":32}],34:[function(_dereq_,module,exports){\r\n(function (ELEMENT) {\r\n  ELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\r\n\r\n  ELEMENT.closest = ELEMENT.closest || function closest(selector) {\r\n    var element = this;\r\n\r\n    while (element) {\r\n      if (element.matches(selector)) {\r\n        break;\r\n      }\r\n\r\n      element = element.parentElement;\r\n    }\r\n\r\n    return element;\r\n  };\r\n}(Element.prototype));\r\n\r\n},{}],35:[function(_dereq_,module,exports){\r\nvar Parser = _dereq_('./lib/parser')\r\n  , Resource = _dereq_('./lib/resource')\r\n  , validationFlag = false;\r\n\r\nmodule.exports = {\r\n\r\n  parse: function(unparsed) {\r\n    return new Parser().parse(unparsed, validationFlag);\r\n  },\r\n\r\n  enableValidation: function(flag) {\r\n    validationFlag = (flag != null) ? flag : true;\r\n  },\r\n\r\n  disableValidation: function() {\r\n    validationFlag = false;\r\n  },\r\n\r\n  Resource: Resource\r\n\r\n};\r\n\r\n},{\"./lib/parser\":37,\"./lib/resource\":38}],36:[function(_dereq_,module,exports){\r\n'use strict';\r\n\r\n/*\r\n * A very naive copy-on-write immutable stack. Since the size of the stack\r\n * is equal to the depth of the embedded resources for one HAL resource, the bad\r\n * performance for the copy-on-write approach is probably not a problem at all.\r\n * Might be replaced by a smarter solution later. Or not. Whatever.\r\n */\r\nfunction ImmutableStack() {\r\n  if (arguments.length >= 1) {\r\n    this._array = arguments[0];\r\n  } else {\r\n    this._array = [];\r\n  }\r\n}\r\n\r\nImmutableStack.prototype.array = function() {\r\n  return this._array;\r\n};\r\n\r\nImmutableStack.prototype.isEmpty = function(array) {\r\n  return this._array.length === 0;\r\n};\r\n\r\nImmutableStack.prototype.push = function(element) {\r\n  var array = this._array.slice(0);\r\n  array.push(element);\r\n  return new ImmutableStack(array);\r\n};\r\n\r\nImmutableStack.prototype.pop = function() {\r\n  var array = this._array.slice(0, this._array.length - 1);\r\n  return new ImmutableStack(array);\r\n};\r\n\r\nImmutableStack.prototype.peek = function() {\r\n  if (this.isEmpty()) {\r\n    throw new Error('can\\'t peek on empty stack');\r\n  }\r\n  return this._array[this._array.length - 1];\r\n};\r\n\r\nmodule.exports = ImmutableStack;\r\n\r\n},{}],37:[function(_dereq_,module,exports){\r\n'use strict';\r\n\r\nvar Resource = _dereq_('./resource')\r\n  , Stack = _dereq_('./immutable_stack');\r\n\r\nvar linkSpec = {\r\n  href: { required: true, defaultValue: null },\r\n  templated: { required: false, defaultValue: false },\r\n  type: { required: false, defaultValue: null },\r\n  deprecation: { required: false, defaultValue: null },\r\n  name: { required: false, defaultValue: null },\r\n  profile: { required: false, defaultValue: null },\r\n  title: { required: false, defaultValue: null },\r\n  hreflang: { required: false, defaultValue: null }\r\n};\r\n\r\nfunction Parser() {\r\n}\r\n\r\nParser.prototype.parse = function parse(unparsed, validationFlag) {\r\n  var validation = validationFlag ? [] : null;\r\n  return _parse(unparsed, validation, new Stack());\r\n};\r\n\r\nfunction _parse(unparsed, validation, path) {\r\n  if (unparsed == null) {\r\n    return unparsed;\r\n  }\r\n  var allLinkArrays = parseLinks(unparsed._links, validation,\r\n      path.push('_links'));\r\n  var curies = parseCuries(allLinkArrays);\r\n  var allEmbeddedArrays = parseEmbeddedResourcess(unparsed._embedded,\r\n      validation, path.push('_embedded'));\r\n  var resource = new Resource(allLinkArrays, curies, allEmbeddedArrays,\r\n      validation);\r\n  copyNonHalProperties(unparsed, resource);\r\n  resource._original = unparsed;\r\n  return resource;\r\n}\r\n\r\nfunction parseLinks(links, validation, path) {\r\n  links = parseHalProperty(links, parseLink, validation, path);\r\n  if (links == null || links.self == null) {\r\n    // No links at all? Then it implictly misses the self link which it SHOULD\r\n    // have according to spec\r\n    reportValidationIssue('Resource does not have a self link', validation,\r\n        path);\r\n  }\r\n  return links;\r\n}\r\n\r\nfunction parseCuries(linkArrays) {\r\n  if (linkArrays) {\r\n    return linkArrays.curies;\r\n  } else {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction parseEmbeddedResourcess(original, parentValidation, path) {\r\n  var embedded = parseHalProperty(original, identity, parentValidation, path);\r\n  if (embedded == null) {\r\n    return embedded;\r\n  }\r\n  Object.keys(embedded).forEach(function(key) {\r\n    embedded[key] = embedded[key].map(function(embeddedElement) {\r\n      var childValidation = parentValidation != null ? [] : null;\r\n      var embeddedResource = _parse(embeddedElement, childValidation,\r\n          path.push(key));\r\n      embeddedResource._original = embeddedElement;\r\n      return embeddedResource;\r\n    });\r\n  });\r\n  return embedded;\r\n}\r\n\r\n/*\r\n * Copy over non-hal properties (everything that is not _links or _embedded)\r\n * to the parsed resource.\r\n */\r\nfunction copyNonHalProperties(unparsed, resource) {\r\n  Object.keys(unparsed).forEach(function(key) {\r\n    if (key !== '_links' && key !== '_embedded') {\r\n      resource[key] = unparsed[key];\r\n    }\r\n  });\r\n}\r\n\r\n/*\r\n * Processes one of the two main hal properties, that is _links or _embedded.\r\n * Each sub-property is turned into a single element array if it isn't already\r\n * an array. processingFunction is applied to each array element.\r\n */\r\nfunction parseHalProperty(property, processingFunction, validation, path) {\r\n  if (property == null) {\r\n    return property;\r\n  }\r\n\r\n  // create a shallow copy of the _links/_embedded object\r\n  var copy = {};\r\n\r\n  // normalize each link/each embedded object and put it into our copy\r\n  Object.keys(property).forEach(function(key) {\r\n    copy[key] = arrayfy(key, property[key], processingFunction,\r\n        validation, path);\r\n  });\r\n  return copy;\r\n}\r\n\r\nfunction arrayfy(key, object, fn, validation, path) {\r\n  if (isArray(object)) {\r\n    return object.map(function(element) {\r\n      return fn(key, element, validation, path);\r\n    });\r\n  } else {\r\n    return [fn(key, object, validation, path)];\r\n  }\r\n}\r\n\r\n\r\nfunction parseLink(linkKey, link, validation, path) {\r\n  if (!isObject(link)) {\r\n    throw new Error('Link object is not an actual object: ' + link +\r\n      ' [' + typeof link + ']');\r\n  }\r\n\r\n  // create a shallow copy of the link object\r\n  var copy = shallowCopy(link);\r\n\r\n  // add missing properties mandated by spec and do generic validation\r\n  Object.keys(linkSpec).forEach(function(key) {\r\n    if (copy[key] == null) {\r\n      if (linkSpec[key].required) {\r\n        reportValidationIssue('Link misses required property ' + key + '.',\r\n            validation, path.push(linkKey));\r\n      }\r\n      if (linkSpec[key].defaultValue != null) {\r\n        copy[key] = linkSpec[key].defaultValue;\r\n      }\r\n    }\r\n  });\r\n\r\n  // check more inter-property relations mandated by spec\r\n  if (copy.deprecation) {\r\n    log('Warning: Link ' + pathToString(path.push(linkKey)) +\r\n        ' is deprecated, see ' + copy.deprecation);\r\n  }\r\n  if (copy.templated !== true && copy.templated !== false) {\r\n    copy.templated = false;\r\n  }\r\n\r\n  if (!validation) {\r\n    return copy;\r\n  }\r\n  if (copy.href && copy.href.indexOf('{') >= 0 && !copy.templated) {\r\n    reportValidationIssue('Link seems to be an URI template ' +\r\n        'but its \"templated\" property is not set to true.', validation,\r\n        path.push(linkKey));\r\n  }\r\n  return copy;\r\n}\r\n\r\nfunction isArray(o) {\r\n  return Object.prototype.toString.call(o) === '[object Array]';\r\n}\r\n\r\nfunction isObject(o) {\r\n  return typeof o === 'object';\r\n}\r\n\r\nfunction identity(key, object) {\r\n  return object;\r\n}\r\n\r\nfunction reportValidationIssue(message, validation, path) {\r\n  if (validation) {\r\n    validation.push({\r\n      path: pathToString(path),\r\n      message: message\r\n    });\r\n  }\r\n}\r\n\r\n// TODO fix this ad hoc mess - does ie support console.log as of ie9?\r\nfunction log(message) {\r\n  if (typeof console !== 'undefined' && typeof console.log === 'function') {\r\n    console.log(message);\r\n  }\r\n}\r\n\r\nfunction shallowCopy(source) {\r\n  var copy = {};\r\n  Object.keys(source).forEach(function(key) {\r\n    copy[key] = source[key];\r\n  });\r\n  return copy;\r\n}\r\n\r\nfunction pathToString(path) {\r\n  var s = '$.';\r\n  for (var i = 0; i < path.array().length; i++) {\r\n    s += path.array()[i] + '.';\r\n  }\r\n  s = s.substring(0, s.length - 1);\r\n  return s;\r\n}\r\n\r\nmodule.exports = Parser;\r\n\r\n},{\"./immutable_stack\":36,\"./resource\":38}],38:[function(_dereq_,module,exports){\r\n'use strict';\r\n\r\nfunction Resource(links, curies, embedded, validationIssues) {\r\n  var self = this;\r\n  this._links = links || {};\r\n  this._initCuries(curies);\r\n  this._embedded = embedded || {};\r\n  this._validation = validationIssues || [];\r\n}\r\n\r\nResource.prototype._initCuries = function(curies) {\r\n  this._curiesMap = {};\r\n  if (!curies) {\r\n    this._curies = [];\r\n  } else {\r\n    this._curies = curies;\r\n    for (var i = 0; i < this._curies.length; i++) {\r\n      var curie = this._curies[i];\r\n      this._curiesMap[curie.name] = curie;\r\n    }\r\n  }\r\n  this._preResolveCuries();\r\n};\r\n\r\nResource.prototype._preResolveCuries = function() {\r\n  this._resolvedCuriesMap = {};\r\n  for (var i = 0; i < this._curies.length; i++) {\r\n    var curie = this._curies[i];\r\n    if (!curie.name) {\r\n      continue;\r\n    }\r\n    for (var rel in this._links) {\r\n      if (rel !== 'curies') {\r\n        this._preResolveCurie(curie, rel);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nResource.prototype._preResolveCurie = function(curie, rel) {\r\n  var link = this._links[rel];\r\n  var prefixAndReference = rel.split(/:(.+)/);\r\n  var candidate = prefixAndReference[0];\r\n  if (curie.name === candidate) {\r\n    if (curie.templated && prefixAndReference.length >= 1) {\r\n      // TODO resolving templated CURIES should use a small uri template\r\n      // lib, not coded here ad hoc\r\n      var href = curie.href.replace(/(.*){(.*)}(.*)/, '$1' +\r\n          prefixAndReference[1] + '$3');\r\n      this._resolvedCuriesMap[href] = rel;\r\n    } else {\r\n      this._resolvedCuriesMap[curie.href] = rel;\r\n    }\r\n  }\r\n};\r\n\r\nResource.prototype.allLinkArrays = function() {\r\n  return this._links;\r\n};\r\n\r\nResource.prototype.linkArray = function(key) {\r\n  return propertyArray(this._links, key);\r\n};\r\n\r\nResource.prototype.link = function(key, index) {\r\n  return elementOfPropertyArray(this._links, key, index);\r\n};\r\n\r\nResource.prototype.hasCuries = function(key) {\r\n  return this._curies.length > 0;\r\n};\r\n\r\nResource.prototype.curieArray = function(key) {\r\n  return this._curies;\r\n};\r\n\r\nResource.prototype.curie = function(name) {\r\n  return this._curiesMap[name];\r\n};\r\n\r\nResource.prototype.reverseResolveCurie = function(fullUrl) {\r\n  return this._resolvedCuriesMap[fullUrl];\r\n};\r\n\r\nResource.prototype.allEmbeddedResourceArrays = function () {\r\n  return this._embedded;\r\n};\r\n\r\nResource.prototype.embeddedResourceArray = function(key) {\r\n  return propertyArray(this._embedded, key);\r\n};\r\n\r\nResource.prototype.embeddedResource = function(key, index) {\r\n  return elementOfPropertyArray(this._embedded, key, index);\r\n};\r\n\r\nResource.prototype.original = function() {\r\n  return this._original;\r\n};\r\n\r\nfunction propertyArray(object, key) {\r\n  return object != null ? object[key] : null;\r\n}\r\n\r\nfunction elementOfPropertyArray(object, key, index) {\r\n  index = index || 0;\r\n  var array = propertyArray(object, key);\r\n  if (array != null && array.length >= 1) {\r\n    return array[index];\r\n  }\r\n  return null;\r\n}\r\n\r\nResource.prototype.validationIssues = function() {\r\n  return this._validation;\r\n};\r\n\r\n// alias definitions\r\nResource.prototype.allLinks = Resource.prototype.allLinkArrays;\r\nResource.prototype.allEmbeddedArrays =\r\n    Resource.prototype.allEmbeddedResources =\r\n    Resource.prototype.allEmbeddedResourceArrays;\r\nResource.prototype.embeddedArray = Resource.prototype.embeddedResourceArray;\r\nResource.prototype.embedded = Resource.prototype.embeddedResource;\r\nResource.prototype.validation = Resource.prototype.validationIssues;\r\n\r\nmodule.exports = Resource;\r\n\r\n},{}],39:[function(_dereq_,module,exports){\r\nmodule.exports=function(n){var t={},e=[];n=n||this,n.on=function(n,e,l){(t[n]=t[n]||[]).push([e,l])},n.off=function(n,l){n||(t={});for(var o=t[n]||e,i=o.length=l?o.length:0;i--;)l==o[i][0]&&o.splice(i,1)},n.emit=function(n){for(var l,o=t[n]||e,i=o.length>0?o.slice(0,o.length):o,c=0;l=i[c++];)l[0].apply(l[1],e.slice.call(arguments,1))}};\r\n},{}]},{},[1])(1)\r\n});\r\n\r\n","var air = {};\r\nair.key = `cd842d7bc5cda4c1a7a64b19cb38d889d2e1e221`;\r\nair.aqi = ``;\r\n \r\n//User input\r\nair.getCity = function(){\r\n\tTeleportAutocomplete.init('.my-input').on('change', function(returned) {\r\n\t\tair.getData(returned);\r\n\t\t$('h1').html(returned.name);\r\n\t\t$('.input').addClass('invisible');\r\n\t\t$('h1').addClass('slideInRight');\r\n\t});\r\n} \r\n  \r\n//ajax\r\nair.getData = function(location){\r\n\tlet aqi = $.ajax({\r\n\t\turl: `https://api.waqi.info/feed/geo:${location.latitude};${location.longitude}/`,\r\n\t\tmethod: \"GET\",\r\n\t\tdataType: \"json\",\r\n\t\tdata: {\r\n\t\t\ttoken: air.key,\r\n\t\t\tformat: 'json'\r\n\t\t}\r\n\t})\r\n\tlet weather = $.ajax({\r\n\t\turl:`https://api.darksky.net/forecast/da4b3ace237cd614779bc70450a0ae24/${location.latitude},${location.longitude}?units=ca`,\r\n\t\tmethod: `GET`,\r\n\t\tdataType: `jsonp`,\r\n\t\tdata: {\r\n\t\t\tformat: `jsonp`\r\n\t\t},\r\n\t})\r\n\t$.when(aqi, weather)\r\n\t.then(function(aqiReturned, weatherReturned){\r\n\t\tair.display(aqiReturned[0], weatherReturned[0]);\r\n\t})\r\n\t.fail(function (errAqi, errWeather){\r\n\t\tconsole.log(`aqi: ${errAqi} weather: ${errWeather} `)\r\n\t});\r\n}\r\n\r\n\r\n\r\n//display landing page data\r\nair.display = function(aqi, weather){\r\n\t// const pm25 = aqi.data.iaqi.pm25.v;\r\n\tconst pm25 = aqi.data.iaqi.pm25 ? aqi.data.iaqi.pm25.v : \"No data for \";\r\n\tconst uv = weather.currently.uvIndex;\r\n\tconst temp = Math.floor(weather.currently.temperature);\r\n\tconst windFeel = Math.floor(weather.currently.apparentTemperature);\r\n\tconst weatherDescription = weather.minutely ? weather.minutely.summary : weather.daily.summary;\r\n\r\n// animation\r\n\t$('.display').addClass('fadeIn');\r\n\t$('aside').addClass('fadeIn');\r\n\t$('.shader').css('background', 'rgba(0, 0, 0, 0.8)');\r\n\t// $('.infoGallery__p').addClass('slideInRight');\r\n \r\n//initial load\r\n\t$('.display__main').html(`${temp}C`);\r\n\t$('.display__info').html(`${weatherDescription}`);\r\n\t$('.img__1').attr(\"src\",\"public/assets/wtemp.svg\");\r\n\t$('.img__2').attr(\"src\",\"public/assets/wsun.svg\");\r\n\t$('.img__3').attr(\"src\",\"public/assets/whaze.svg\");\r\n\t\r\n//main \r\n\t$('#side__main').attr('data-temp', temp);\r\n\t$('#side__main').attr('data-uv', uv);\r\n\t$('#side__main').attr('data-pm25', pm25);\r\n\t$('#side__main').attr('data-desc', weatherDescription);\r\n\r\n//weather\r\n\t$('.imgText__1').html(`${temp}C`);\r\n\t$('.imgTitle__1').html(`Temperature`);\r\n\t// $('#side__temp').html(`${temp}C`);\r\n\t$('#side__temp').attr('data-temp', temp);\r\n\t$('#side__temp').attr('data-feel', windFeel);\r\n\t\r\n//uv\r\n\t$('.imgTitle__2').html(`Ultra Violet Index`);\r\n\t$('.imgText__2').html(`${uv}UV`);\r\n\t// $('#side__uv').html(`${uv}UV`);\r\n\t$('#side__uv').attr('data-uv', uv);\r\n\t\r\n//AQI\r\n\t$('.imgText__3').html(`${pm25} PM2.5`);\r\n\t$('.imgTitle__3').html(`Air Quality Index`);\r\n\t// $('#side__pm25').html(`${pm25} PM2.5`);\r\n\t$('#side__pm25').attr('data-pm25', pm25);\r\n\t\r\n\r\n\r\n//side buttons\r\n\t$('.box').on('click', function(){\r\n\t\t\tvar data = $(this).data();\r\n\t\t\tif(this.id === 'side__main'){\r\n\t\t\t\tair.displayMain(data);\r\n\t\t\t}else if (this.id === 'side__temp'){\r\n\t\t\t\tair.displayTemp(data);\r\n\t\t\t}else if (this.id === 'side__uv'){\r\n\t\t\t\tair.displayUV(data);\r\n\t\t\t}else if (this.id === 'side__pm25'){\r\n\t\t\t\tair.displayPM25(data);\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\n\r\n// display functions\r\nair.displayMain = function(data){\r\n\t//Toggle invisible and active\r\n\t$('.document__gallery').removeClass('invisible');\r\n\t$('.info__gallery').addClass(\"invisible\");\r\n\t$('.box').removeClass('black');\r\n\t$('#side__main').addClass('black');\r\n\t//main text\r\n\t$('.display__main').html(`${data.temp}C`);\r\n\t$('.display__info').html(`${data.desc}`);\r\n\t//set images\r\n\t$('.img__1').attr(\"src\",\"./public/assets/wtemp.svg\");\r\n\t$('.img__2').attr(\"src\",\"./public/assets/wsun.svg\");\r\n\t$('.img__3').attr(\"src\",\"./public/assets/whaze.svg\");\r\n\t//set p text\r\n\t$('.imgTitle__1').html(`Temperature`);\r\n\t$('.imgTitle__2').html(`Ultra Violet Index`);\r\n\t$('.imgTitle__3').html(`Air Quality Index`);\r\n\t$('.imgText__1').html(`${data.temp}C`);\r\n\t$('.imgText__2').html(`${data.uv}UV`);\r\n\t$('.imgText__3').html(`${data.pm25} PM2.5`);\r\n}\r\n\r\n\r\n\r\nair.displayTemp = function(data){\r\n\t//Hide main document gallery and show temp info\r\n\t$('.document__gallery').addClass('invisible');\r\n\t$('.info__gallery').removeClass('invisible');\r\n\t// $('.info__gallery').css('display', 'flex');\r\n\t$('.box').removeClass('black');\r\n\t$('#side__temp').addClass('black');\r\n\t//main\r\n\tif((data.temp!== data.feel) && (data.temp <= 0 || data.temp >=25)){\r\n\t\t$('.display__main').html(`The current temperature is ${data.temp}C.  It feels like ${data.feel}`);\r\n\t}else{\r\n\t\t$('.display__main').html(`The current temperature is ${data.temp}C.`);\r\n\t}\r\n\t//description\r\n\tif(data.feel<= -55){\r\n\t\t$('.display__info').html(`VERY DANGEROUS... Good luck! Exposed flesh freezes in less than 2 minutes.`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wzombie.svg\");\r\n\t\t$('.infoGallery__p').html(`Stay inside.`);\r\n\r\n\t}else if (data.feel < -48){\r\n\t\t$('.display__info').html(`Severe risk of death!  Exposed flesh can freeze in 2 to 5 minutes!  Cover EVERYTHING.  I wouldn't go out there...`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wzombie.svg\");\r\n\t\t$('.infoGallery__p').html(`Wear extremely warm dry clothing to stay safe.`);\r\n\r\n\t}else if (data.feel < -40){\r\n\t\t$('.display__info').html(`Very high risk of death!  Exposed flesh can freeze in 5 to 10 minutes.  Cover all exposed skin!`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wzombie.svg\");\r\n\t\t$('.infoGallery__p').html(`Wear very warm dry clothing to stay safe.`);\r\n\r\n\t}else if (data.feel < -28){\r\n\t\t$('.display__info').html(`High risk of death: Exposed flesh can freeze in 10 to 30 minutes.  Cover up!`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wzombie.svg\");\r\n\t\t$('.infoGallery__p').html(`Wear very warm dry clothing to stay safe.`);\r\n\r\n\t}else if (data.feel < -10){\r\n\t\t$('.display__info').html(`Moderate risk of death:  Risk of hypothermia and frostbite is possible if exposed to elements for an extended period of time.`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wcold.svg\");\r\n\t\t$('.infoGallery__p').html(`Wear a warm hat and jacket to stay safe.`);\r\n\r\n\t}else if (data.feel < -0){\r\n\t\t$('.display__info').html(`If you dress warmly and stay dry you should be ok.`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wjacket.svg\");\r\n\t\t$('.infoGallery__p').html(`Wear a warm hat and jacket to stay comfortable.`);\r\n\r\n\t}else if (data.feel < 10){\r\n\t\t$('.display__info').html(`Its pretty chilly and you should wear warm clothing.`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wjacket.svg\");\r\n\t\t$('.infoGallery__p').html(`Despite this fact most Canadians are wearing shorts and Tshirts.`);\r\n\r\n\t}else if (data.feel < 20){\r\n\t\t$('.display__info').html(`Its pretty warm.`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/whappyperson.svg\");\r\n\t\t$('.infoGallery__p').html(`You may want to wear a light jacket or sweater.`);\r\n\r\n\t}else if (data.feel < 25){\r\n\t\t$('.display__info').html(`Most people would consider this to be the perfect temperature.`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/whappyperson.svg\");\r\n\t\t$('.infoGallery__p').html(`No need for jackets or sweaters.`);\r\n\r\n\t}else if (data.feel < 32){\r\n\t\t$('.display__info').html(`Fairly hot. Stay hydrated.`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wsweating.svg\");\r\n\t\t$('.infoGallery__p').html(`Fatigue is possible with prolonged exposure or moderate physical activity.`);\r\n\r\n\t}else if (data.feel < 39){\r\n\t\t$('.display__info').html(`Medium risk of death from exposure.  Be sure to drink a lot of water and remain in the shade.`);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wexhaustion.svg\");\r\n\t\t$('.infoGallery__p').html(`It's very HOT!  Heatstroke and dehydration are likely from exposure and physical activity.`);\r\n\r\n\t}else if (data.feel > 39){\r\n\t\t$('.display__info').html(`High risk of death from exposure.  VERY VERY HOT!!!   `);\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wmanfire.svg\");\r\n\t\t$('.infoGallery__p').html(`Do not do any physical activity outside.  Drink lots of water and stay out of the sun.`);\r\n\t}\t\r\n}\r\n\r\n\r\n\r\nair.displayUV = function(data){\r\n\t//Hide main document gallery\r\n\t$('.document__gallery').addClass('invisible');\r\n\t$('.info__gallery').removeClass('invisible');\r\n\t// $('.info__gallery').css('display', 'flex');\r\n\t$('.box').removeClass('black');\r\n\t$('#side__uv').addClass('black');\r\n\t//main\r\n\t$('.display__main').html(`${data.uv} on the UV index`);\r\n\t//description\r\n\tif(data.uv === 0){\r\n\t\t$('.display__info').html('No sun no worries!');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/whappyperson.svg\");\r\n\t\t$('.infoGallery__p').html(`There is no need for sunscreen or to limit your exposure outside.`);\r\n\t}else if(data.uv < 3){\r\n\t\t$('.display__info').html('Low ultra violet index.  ');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/whappyperson.svg\");\r\n\t\t$('.infoGallery__p').html(`No sun protection needed!  Enjoy your time outside!`);\r\n\t}else if(data.uv < 5){\r\n\t\t$('.display__info').html('Moderate ultra violet index.  Do not stay in the sun during midday.');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/what.svg\");\r\n\t\t$('.infoGallery__p').html(`Wear a shirt, a hat and some sunscreen (SPF 15+).`);\r\n\t}else if(data.uv < 8){\r\n\t\t$('.display__info').html('High ultra violet index.  Avoid the sun especially during midday.  ');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wmanfire.svg\");\r\n\t\t$('.infoGallery__p').html(`Wearing a shirt, a hat, sunglasses and some sunscreen (SPF 15+) is HIGHLY recommended.`);\r\n\t}else if(data.uv < 11){\r\n\t\t$('.display__info').html('Very high ultra violet index.  Avoid the sun if possible.  If you need to go outside wear a shirt, a hat, sunglasses, sunscreen (SPF 15+) and limit exposure to the sun.');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wmanonfire.svg\");\r\n\t\t$('.infoGallery__p').html(`If you need to go outside wear a shirt, a hat, sunglasses, sunscreen (SPF 15+) and limit exposure to the sun.`);\r\n\t}else{\r\n\t\t$('.display__info').html('EXTREME ultraviolet index.  Avoid exposure.  If you must go outside cover exposed skin, constantly re-apply sunscreen and seek shade.');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wwildfire.svg\");\r\n\t\t$('.infoGallery__p').html(`If you must go outside cover exposed skin, constantly re-apply sunscreen and seek shade.`);\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\nair.displayPM25 = function(data){\r\n\t//Hide main document gallery\r\n\t$('.document__gallery').addClass('invisible');\r\n\t$('.info__gallery').removeClass('invisible');\r\n\t// $('.info__gallery').css('display', 'flex');\r\n\t$('.box').removeClass('black');\r\n\t$('#side__pm25').addClass('black');\r\n\t//Convert AQI to cigarette metric\r\n\tvar ciggs = Math.floor(data.pm25 / 25);\r\n\tif (ciggs === 1){\r\n\t\t$('.infoGallery__p').html(`Breathing this air for 24 hours is equivalent to smoking one cigarette.`);\r\n\t}else{\r\n\t\t$('.infoGallery__p').html(`Breathing this air for 24 hours is equivalent to smoking ${ciggs} cigarettes.`);\r\n\t}\r\n\t//main\r\n\t$('.display__main').html(`${data.pm25} PM25.`);\r\n\r\n\r\n\tif(ciggs === 0){\r\n\t\t$('.display__info').html('Air quality is very good.  Go outside and breath deep!');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wtree.svg\");\r\n\t}else if(ciggs === 1){\r\n\t\t$('.display__info').html('Air quality is very good.  Go outside and breath deep!');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/wsmoker.svg\");\r\n\t}else if(ciggs === 2){\r\n\t\t$('.display__info').html('Air quality is very good.  Go outside and breath deep!');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/w2ciggs.svg\");\r\n\t}else if(ciggs === 3){\r\n\t\t$('.display__info').html('Air quality is very good.  Go outside and breath deep!');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/w3ciggs.svg\");\r\n\t}else if(data.pm25<= 100){\r\n\t\t$('.display__info').html('Air quality is moderate.  People with respiratory diseases should limit outdoor exposure.');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/w3ciggs.svg\");\r\n\t}else if(data.pm25<= 150){\r\n\t\t$('.display__info').html('Air quality is unhealthy for at risk groups such as infants, the elderly and those with respiratory disease.  Limit outdoor exposure and wear an air filtration mask.');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/w3ciggs.svg\");\r\n\t}else if (data.pm25<= 200){\r\n\t\t$('.display__info').html('Air quality is unhealthy.  You should not do physical activity outdoors.  Wear an air filtration mask to limit harmful effects of the poor air quality.');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/w3ciggs.svg\");\r\n\t}else if (data.pm25<= 300){\r\n\t\t$('.display__info').html('Air quality is very unhealthy.  Everyone should limit their outdoor exposure.  When going outside be sure to wear an appropriate air filtration mask such as those with an N95 safety rating.');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/w3ciggs.svg\");\r\n\t}else if (data.pm25 > 300){\r\n\t\t$('.display__info').html('Air quality is hazardous.  Do not go outside without an N95 filtration mask.');\r\n\t\t$('.infoGallery__img').attr(\"src\",\"./public/assets/w3ciggs.svg\");\r\n\t}\r\n}\r\n\r\n\r\n\r\n//Initialize page\r\nair.init = function(){\r\n\tair.getCity();\r\n};\r\n\r\n$(function(){\r\n\tair.init();\r\n});\r\n\r\n//pseudo code\r\n\r\n//On the first page ask for user input from section input.\r\n//when user puts in input remove section\r\n\r\n//show splash page\r\n//temperature name etc\r\n//if user clicks sidebar replace main page with info\r\n//inside new main page show relevant info based on current conditions\r\n\r\n\r\n\r\n"],"file":"index-min.js"}